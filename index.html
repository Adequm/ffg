
<link rel="stylesheet" href="travel.css" type="text/css" media="screen">

<script type="text/javascript" src="jquery.min.js"></script>

<script type="text/javascript" src="jquery-ui.min.js"></script>

<link href="scada.css" rel="stylesheet">


<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<meta content="text/html; charset=Windows-1251" http-equiv="content-type">
<html><head><title>For Fish Game</title></head><body>


<style>.wl10{background-position: 0px 0px;}.wl11{background-position: -68px 0px;}.wl12{background-position: -136px 0px;}.wl13{background-position: -204px 0px;}.wl14{background-position: -272px 0px;}.wl15{background-position: -340px 0px;}.wl16{background-position: -408px 0px;}.wl17{background-position: -476px 0px;}.wl18{background-position: -544px 0px;}.wl19{background-position: -612px 0px;}.wl20{background-position: 0px -68px;}.wl21{background-position: -68px -68px;}.wl22{background-position: -136px -68px;}.wl23{background-position: -204px -68px;}.wl24{background-position: -272px -68px;}.wl25{background-position: -340px -68px;}.wl26{background-position: -408px -68px;}.wl27{background-position: -476px -68px;}.wl28{background-position: -544px -68px;}.wl29{background-position: -612px -68px;}.wl30{background-position: 0px -136px;}.wl31{background-position: -68px -136px;}.wl32{background-position: -136px -136px;}.wl33{background-position: -204px -136px;}.wl34{background-position: -272px -136px;}.wl35{background-position: -340px -136px;}.wl36{background-position: -408px -136px;}.wl37{background-position: -476px -136px;}.wl38{background-position: -544px -136px;}.wl39{background-position: -612px -136px;}.wl40{background-position: 0px 0px;}.wl41{background-position: -68px 0px;}.wl42{background-position: -136px 0px;}.wl43{background-position: -204px 0px;}.wl44{background-position: -272px 0px;}.wl45{background-position: -340px 0px;}.wl46{background-position: -408px 0px;}.wl47{background-position: -476px 0px;}.wl48{background-position: -544px 0px;}.wl49{background-position: -612px 0px;}.wl50{background-position: 0px -68px;}.wl51{background-position: -68px -68px;}.wl52{background-position: -136px -68px;}.wl53{background-position: -204px -68px;}.wl54{background-position: -272px -68px;}.wl55{background-position: -340px -68px;}.wl56{background-position: -408px -68px;}.wl57{background-position: -476px -68px;}.wl58{background-position: -544px -68px;}.wl59{background-position: -612px -68px;}.wl60{background-position: 0px -136px;}.wl61{background-position: -68px -136px;}.wl62{background-position: -136px -136px;}.wl63{background-position: -204px -136px;}.wl64{background-position: -272px -136px;}.wl65{background-position: -340px -136px;}.wl66{background-position: -408px -136px;}.wl67{background-position: -476px -136px;}.wl68{background-position: -544px -136px;}.wl69{background-position: -612px -136px;}.wl70{background-position: 0px 0px;}.wl71{background-position: -68px 0px;}.wl72{background-position: -136px 0px;}.wl73{background-position: -204px 0px;}.wl74{background-position: -272px 0px;}.wl75{background-position: -340px 0px;}.wl76{background-position: -408px 0px;}.wl77{background-position: -476px 0px;}.wl78{background-position: -544px 0px;}.wl79{background-position: -612px 0px;}.wl80{background-position: 0px -68px;}.wl81{background-position: -68px -68px;}.wl82{background-position: -136px -68px;}.wl83{background-position: -204px -68px;}.wl84{background-position: -272px -68px;}.wl85{background-position: -340px -68px;}.wl86{background-position: -408px -68px;}.wl87{background-position: -476px -68px;}.wl88{background-position: -544px -68px;}.wl89{background-position: -612px -68px;}.wl90{background-position: 0px -136px;}.wl91{background-position: -68px -136px;}.wl92{background-position: -136px -136px;}.wl93{background-position: -204px -136px;}.wl94{background-position: -272px -136px;}.wl95{background-position: -340px -136px;}.wl96{background-position: -408px -136px;}.wl97{background-position: -476px -136px;}.wl98{background-position: -544px -136px;}.wl99{background-position: -612px -136px;}.bg10, .tx10{background-position: 0px 0px;}.bg11, .tx11{background-position: -68px 0px;}.bg12, .tx12{background-position: -136px 0px;}.bg13, .tx13{background-position: -204px 0px;}.bg14, .tx14{background-position: -272px 0px;}.bg15, .tx15{background-position: -340px 0px;}.bg16, .tx16{background-position: -408px 0px;}.bg17, .tx17{background-position: -476px 0px;}.bg18, .tx18{background-position: -544px 0px;}.bg19, .tx19{background-position: -612px 0px;}.bg20, .tx20{background-position: 0px -68px;}.bg21, .tx21{background-position: -68px -68px;}.bg22, .tx22{background-position: -136px -68px;}.bg23, .tx23{background-position: -204px -68px;}.bg24, .tx24{background-position: -272px -68px;}.bg25, .tx25{background-position: -340px -68px;}.bg26, .tx26{background-position: -408px -68px;}.bg27, .tx27{background-position: -476px -68px;}.bg28, .tx28{background-position: -544px -68px;}.bg29, .tx29{background-position: -612px -68px;}.bg30, .tx30{background-position: 0px -136px;}.bg31, .tx31{background-position: -68px -136px;}.bg32, .tx32{background-position: -136px -136px;}.bg33, .tx33{background-position: -204px -136px;}.bg34, .tx34{background-position: -272px -136px;}.bg35, .tx35{background-position: -340px -136px;}.bg36, .tx36{background-position: -408px -136px;}.bg37, .tx37{background-position: -476px -136px;}.bg38, .tx38{background-position: -544px -136px;}.bg39, .tx39{background-position: -612px -136px;}.bg40, .tx40{background-position: 0px -204px;}.bg41, .tx41{background-position: -68px -204px;}.bg42, .tx42{background-position: -136px -204px;}.bg43, .tx43{background-position: -204px -204px;}.bg44, .tx44{background-position: -272px -204px;}.bg45, .tx45{background-position: -340px -204px;}.bg46, .tx46{background-position: -408px -204px;}.bg47, .tx47{background-position: -476px -204px;}.bg48, .tx48{background-position: -544px -204px;}.bg49, .tx49{background-position: -612px -204px;}.bg50, .tx50{background-position: 0px -272px;}.bg51, .tx51{background-position: -68px -272px;}.bg52, .tx52{background-position: -136px -272px;}.bg53, .tx53{background-position: -204px -272px;}.bg54, .tx54{background-position: -272px -272px;}.bg55, .tx55{background-position: -340px -272px;}.bg56, .tx56{background-position: -408px -272px;}.bg57, .tx57{background-position: -476px -272px;}.bg58, .tx58{background-position: -544px -272px;}.bg59, .tx59{background-position: -612px -272px;}.bg60, .tx60{background-position: 0px -340px;}.bg61, .tx61{background-position: -68px -340px;}.bg62, .tx62{background-position: -136px -340px;}.bg63, .tx63{background-position: -204px -340px;}.bg64, .tx64{background-position: -272px -340px;}.bg65, .tx65{background-position: -340px -340px;}.bg66, .tx66{background-position: -408px -340px;}.bg67, .tx67{background-position: -476px -340px;}.bg68, .tx68{background-position: -544px -340px;}.bg69, .tx69{background-position: -612px -340px;}.bg70, .tx70{background-position: 0px -408px;}.bg71, .tx71{background-position: -68px -408px;}.bg72, .tx72{background-position: -136px -408px;}.bg73, .tx73{background-position: -204px -408px;}.bg74, .tx74{background-position: -272px -408px;}.bg75, .tx75{background-position: -340px -408px;}.bg76, .tx76{background-position: -408px -408px;}.bg77, .tx77{background-position: -476px -408px;}.bg78, .tx78{background-position: -544px -408px;}.bg79, .tx79{background-position: -612px -408px;}.bg80, .tx80{background-position: 0px -476px;}.bg81, .tx81{background-position: -68px -476px;}.bg82, .tx82{background-position: -136px -476px;}.bg83, .tx83{background-position: -204px -476px;}.bg84, .tx84{background-position: -272px -476px;}.bg85, .tx85{background-position: -340px -476px;}.bg86, .tx86{background-position: -408px -476px;}.bg87, .tx87{background-position: -476px -476px;}.bg88, .tx88{background-position: -544px -476px;}.bg89, .tx89{background-position: -612px -476px;}.bg90, .tx90{background-position: 0px -544px;}.bg91, .tx91{background-position: -68px -544px;}.bg92, .tx92{background-position: -136px -544px;}.bg93, .tx93{background-position: -204px -544px;}.bg94, .tx94{background-position: -272px -544px;}.bg95, .tx95{background-position: -340px -544px;}.bg96, .tx96{background-position: -408px -544px;}.bg97, .tx97{background-position: -476px -544px;}.bg98, .tx98{background-position: -544px -544px;}.bg99, .tx99{background-position: -612px -544px;}.f1s1{transform: translateY(-64px) rotateX(90deg);}.f1s2{transform: translateZ(-64px) rotateY(180deg);}.f1s3{transform: translateX(-64px) rotateY(270deg);}.f1s4{transform: translateZ(+64px) rotateX(0deg);}.f1s5{transform: translateX(+64px) rotateY(90deg);}.f1s6{transform: translateY(+64px) rotateX(270deg);}.cube1, .cube1 .side{width:128px;height:128px;} .cube1 .side{box-shadow: inset 0 0 0 1px #FFD900}.f2s1{transform: translateY(-128px) rotateX(90deg);}.f2s2{transform: translateZ(-128px) rotateY(180deg);}.f2s3{transform: translateX(-128px) rotateY(270deg);}.f2s4{transform: translateZ(+128px) rotateX(0deg);}.f2s5{transform: translateX(+128px) rotateY(90deg);}.f2s6{transform: translateY(+128px) rotateX(270deg);}.cube2, .cube2 .side{width:256px;height:256px;} .cube2 .side{box-shadow: inset 0 0 0 1px #c93a18}.f3s1{transform: translateY(-192px) rotateX(90deg);}.f3s2{transform: translateZ(-192px) rotateY(180deg);}.f3s3{transform: translateX(-192px) rotateY(270deg);}.f3s4{transform: translateZ(+192px) rotateX(0deg);}.f3s5{transform: translateX(+192px) rotateY(90deg);}.f3s6{transform: translateY(+192px) rotateX(270deg);}.cube3, .cube3 .side{width:384px;height:384px;} .cube3 .side{box-shadow: inset 0 0 0 1px #39b0aa}.f4s1{transform: translateY(-256px) rotateX(90deg);}.f4s2{transform: translateZ(-256px) rotateY(180deg);}.f4s3{transform: translateX(-256px) rotateY(270deg);}.f4s4{transform: translateZ(+256px) rotateX(0deg);}.f4s5{transform: translateX(+256px) rotateY(90deg);}.f4s6{transform: translateY(+256px) rotateX(270deg);}.cube4, .cube4 .side{width:512px;height:512px;} .cube4 .side{box-shadow: inset 0 0 0 1px #669121}.f5s1{transform: translateY(-320px) rotateX(90deg);}.f5s2{transform: translateZ(-320px) rotateY(180deg);}.f5s3{transform: translateX(-320px) rotateY(270deg);}.f5s4{transform: translateZ(+320px) rotateX(0deg);}.f5s5{transform: translateX(+320px) rotateY(90deg);}.f5s6{transform: translateY(+320px) rotateX(270deg);}.cube5, .cube5 .side{width:640px;height:640px;} .cube5 .side{box-shadow: inset 0 0 0 1px #669121}@keyframes pGreen{0,100% {background-position:0px -340px;}33% {background-position:0px -408px;} 66% {background-position:0px -476px;}} .t61{animation: pGreen .75s step-end infinite alternate;}@keyframes pYellow{0,100% {background-position:-68px -340px;}33% {background-position:-68px -408px;} 66% {background-position:-68px -476px;}} .t62{animation: pYellow .75s step-end infinite alternate;}@keyframes pBlue{0,100% {background-position:-136px -340px;}33% {background-position:-136px -408px;} 66% {background-position:-136px -476px;}} .t63{animation: pBlue .75s step-end infinite alternate;}@keyframes pRed{0,100% {background-position:-204px -340px;}33% {background-position:-204px -408px;} 66% {background-position:-204px -476px;}} .t64{animation: pRed .75s step-end infinite alternate;}@keyframes pViolet{0,100% {background-position:-272px -340px;}33% {background-position:-272px -408px;} 66% {background-position:-272px -476px;}} .t65{animation: pViolet .75s step-end infinite alternate;}	.light:after, .minlight:after{position:absolute}
	[class^="wl"]{z-index:10}
	[class^="bg"]>[class~="light"], [class^="bg"]>[class~="minlight"]{cursor:pointer}
	[class^="bg"]>[class~="light"]:hover:after{background-color:rgba(255,255,150,.4)}
	[class^="bg"]>[class~="minlight"]:hover:after{background-color:rgba(255,255,150,.1)}
	[class^="bg"]>[class~="light"]:hover:before, [class^="bg"]>[class~="minlight"]:hover:before{background-color:rgba(255,255,150,.2); width: 32px; height: 32px;}
	
	.f4s2 [class^="bg"]{background-position: -408px -204px;}
	.f4s3 [class^="bg"]{background-position: -408px -204px;}
	.f4s4 [class^="bg"]{background-position: -408px -204px;}
</style><script>

/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
const maze = [[]		
 ,[/*Этаж 1*/[	  
],[
		[44, 44],										[10, 54],										[39, 39],	
		[44, 44],										[92, 10],										[39, 39]	 					
],[
		[44, 44],										[10, 10],										[19, 19],	
		[44, 44],										[14, 47],										[37, 37] 				  
],[
		[44, 44],										[10, 10],										[19, 19],	
		[44, 44],										[48, 10],										[37, 37]	 		 		  
],[
		[44, 44],										[10, 10],										[19, 19],	
		[44, 44],										[10, 10],										[37, 37]	 		 		  
],[
		[44, 44],										[10, 10],										[19, 19],	
		[44, 44],										[10, 10],										[37, 37] 	 	 		  
],[
		[44, 44],										[10, 10],										[15, 16],	
		[44, 44],										[92, 58],										[37, 37]	 	 		  
]]	
 ,[/*Этаж 2*/[	  
],[
		[46, 46, 46, 46],								[10, 10, 10, 10],								[27, 29, 18, 17],	
		[46, 46, 46, 46],								[10, 10, 10, 10],								[29, 16, 37, 19],	
		[46, 46, 46, 46],								[10, 91, 10, 10],								[16, 17, 29, 26],
		[46, 46, 46, 46],								[10, 10, 10, 10],								[26, 37, 15, 29]  					
],[
		[46, 46, 46, 46],								[10, 10, 10, 10],								[37, 19, 35, 37],	
		[46, 46, 46, 46],								[10, 10, 94, 10],								[29, 26, 25, 36],	
		[46, 46, 46, 46],								[10, 10, 10, 10],								[29, 29, 29, 29],
		[46, 46, 46, 46],								[10, 94, 10, 10],								[15, 29, 29, 16]  			  
],[
		[46, 46, 46, 46],								[10, 10, 10, 10],								[19, 37, 19, 25],	
		[46, 46, 46, 46],								[10, 10, 10, 93],								[37, 15, 26, 38],	
		[46, 46, 46, 46],								[10, 10, 78, 10],								[29, 26, 10, 11],
		[46, 46, 46, 46],								[10, 10, 10, 10],								[15, 16, 37, 25] 		  
],[
		[46, 46, 46, 46],								[10, 38, 10, 10],								[29, 29, 18, 15],	
		[46, 46, 46, 46],								[10, 10, 10, 10],								[29, 29, 26, 19],	
		[46, 46, 46, 46],								[10, 10, 10, 10],								[29, 29, 29, 26],
		[46, 46, 46, 46],								[10, 10, 10, 10],								[16, 15, 29, 16]  	  
],[
		[46, 46, 46, 46],								[10, 10, 10, 10],								[26, 15, 29, 18],	
		[46, 46, 46, 46],								[10, 10, 10, 10],								[35, 25, 16, 25],	
		[46, 46, 46, 46],								[10, 10, 10, 10],								[17, 16, 19, 15],
		[46, 46, 46, 46],								[10, 10, 10, 10],								[37, 19, 25, 26] 
],[
		[46, 46, 46, 46],								[10, 78, 10, 10],								[20, 33, 36, 37],	
		[46, 46, 46, 46],								[10, 10, 10, 10],								[19, 19, 15, 29],	
		[46, 46, 46, 46],								[10, 91, 10, 10],								[18, 37, 17, 16],
		[46, 46, 46, 46],								[10, 10, 10, 10],								[39, 29, 26, 19]  
]]	
 ,[/*Этаж 3*/[	  
],[
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 95, 10, 10],						[15, 18, 15, 27, 16, 19],
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 10],						[26, 19, 25, 16, 25, 26],	
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 94],						[29, 18, 38, 39, 36, 15],	
		[46, 46, 46, 46, 46, 46],						[10, 34, 10, 46, 10, 10],						[16, 19, 35, 37, 35, 25],
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 10],						[25, 27, 39, 29, 39, 29],
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 10],						[28, 16, 19, 38, 39, 29]  	  		
],[
		[46, 46, 46, 46, 46, 46],						[10, 94, 10, 10, 10, 10],						[26, 35, 25, 29, 26, 15],
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 10],						[15, 27, 29, 16, 35, 19],	
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 10],						[25, 12, 35, 19, 25, 27],	
		[46, 46, 46, 46, 46, 46],						[10, 78, 10, 10, 10, 10],						[29, 32, 19, 25, 16, 15],
		[46, 46, 46, 46, 46, 46],						[10, 36, 10, 10, 10, 94],						[29, 29, 18, 15, 18, 37],
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 10],						[29, 16, 19, 19, 37, 35]   			  
],[
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 10],						[29, 27, 26, 25, 29, 18],
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 35, 10, 10],						[35, 15, 29, 29, 29, 26],	
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 92, 10],						[26, 17, 28, 16, 35, 15],	
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 10],						[16, 19, 19, 19, 17, 26],
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 78],						[19, 19, 19, 19, 25, 12],
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 10],						[19, 25, 27, 27, 29, 32]   				  
],[
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 10],						[19, 25, 27, 16, 25, 29],
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 10],						[25, 28, 16, 19, 38, 29],	
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 10],						[16, 19, 19, 25, 28, 29],	
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 10],						[19, 37, 25, 16, 37, 15],
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 10],						[37, 15, 29, 26, 10, 26],
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 78, 10],						[35, 19, 15, 16, 30, 29] 
],[
		[46, 46, 46, 46, 46, 46],						[40, 10, 10, 10, 10, 10],						[26, 19, 37, 25, 16, 15],
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 10],						[16, 25, 16, 15, 27, 18],	
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 10],						[27, 16, 19, 25, 29, 26],	
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 10],						[29, 26, 19, 15, 16, 15],
		[46, 46, 46, 46, 46, 46],						[14, 10, 10, 10, 10, 10],						[38, 16, 25, 26, 19, 25],
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 10],						[16, 17, 29, 16, 17, 29] 	  	  
],[
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 59, 10],						[25, 27, 26, 19, 38, 29],
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 10],						[15, 16, 15, 39, 16, 15],	
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 11, 10, 10],						[19, 17, 39, 39, 39, 18],	
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 10],						[25, 18, 25, 39, 26, 25],
		[46, 46, 46, 46, 46, 46],						[44, 10, 14, 10, 10, 10],						[35, 25, 36, 25, 29, 29],
		[46, 46, 46, 46, 46, 46],						[10, 10, 10, 10, 10, 10],						[39, 29, 16, 15, 28, 36] 
]]	
 ,[/*Этаж 4*/[	  
],[
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[28, 29, 36, 35, 25, 26, 35, 25],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[26, 15, 16, 25, 29, 28, 27, 29],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[35, 19, 25, 29, 16, 17, 28, 28],	
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 93, 10],				[17, 27, 29, 29, 18, 19, 19, 19],	
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[26, 38, 29, 28, 26, 25, 27, 39],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 95, 10, 10, 10, 10, 10],				[15, 16, 35, 19, 38, 16, 15, 26],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[26, 19, 19, 25, 16, 25, 26, 15],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[29, 26, 17, 29, 39, 29, 29, 26]	
],[
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[25, 28, 26, 19, 38, 16, 15, 29],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 93, 10, 10, 10, 10, 10],				[16, 25, 36, 25, 16, 25, 27, 29],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[19, 15, 29, 36, 25, 16, 15, 29],	
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 14, 92, 10, 10, 10],				[27, 26, 15, 28, 16, 19, 25, 29],	
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 33, 10, 10, 10],				[38, 29, 26, 19, 19, 25, 29, 16],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 92, 10, 10, 93, 10],				[16, 35, 15, 26, 25, 29, 36, 25],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 14, 10, 10, 10, 10],				[26, 19, 19, 38, 29, 29, 16, 38],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[16, 19, 17, 29, 16, 15, 26, 15]		  
],[
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[26, 19, 15, 29, 27, 36, 19, 17],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 19, 78, 10, 10, 10],				[16, 19, 19, 38, 12, 15, 26, 19],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[26, 17, 26, 15, 32, 25, 12, 25],	
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 78, 10],				[16, 25, 16, 25, 16, 15, 32, 15],	
		[46, 46, 46, 46, 46, 46, 46, 46],				[41, 10, 10, 10, 10, 10, 10, 10],				[37, 15, 26, 15, 26, 25, 16, 19],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 31],				[29, 26, 38, 18, 15, 28, 26, 19],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[28, 29, 29, 26, 19, 37, 15, 26],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[26, 35, 38, 28, 26, 15, 26, 15]		  
],[
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[29, 16, 25, 16, 37, 15, 28, 29],
		[46, 46, 46, 46, 46, 46, 46, 46],				[97, 10, 10, 10, 10, 10, 10, 10],				[35, 25, 16, 25, 29, 26, 25, 16],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[27, 36, 25, 29, 16, 15, 29, 26],	
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[29, 29, 29, 29, 26, 19, 15, 29],	
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 78, 10, 10, 10],				[15, 16, 15, 29, 12, 25, 26, 15],
		[46, 46, 46, 46, 46, 46, 46, 46],				[49, 10, 10, 10, 10, 10, 10, 10],				[37, 19, 25, 16, 30, 29, 29, 27],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 78, 10, 10, 10],				[35, 25, 12, 19, 15, 29, 28, 36],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[26, 15, 32, 37, 25, 16, 25, 16]		  
],[
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[16, 19, 15, 26, 15, 26, 25, 26],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[19, 19, 25, 29, 26, 15, 29, 28],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[25, 26, 15, 29, 16, 17, 28, 26],	
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[29, 28, 27, 16, 19, 37, 19, 15],	
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[36, 19, 15, 18, 19, 15, 26, 19],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[16, 19, 37, 25, 26, 19, 15, 27],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 14],				[19, 25, 28, 29, 28, 26, 19, 38],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[25, 16, 25, 16, 17, 36, 25, 29]			  
],[
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[16, 19, 38, 16, 38, 39, 36, 19],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 95, 10, 10, 10, 10, 10, 10],				[19, 25, 28, 27, 29, 18, 15, 27],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[39, 29, 26, 35, 38, 18, 25, 36],	
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[25, 29, 29, 27, 16, 25, 29, 29],	
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[29, 29, 36, 15, 18, 15, 29, 29],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[35, 15, 29, 27, 26, 25, 29, 16],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[27, 18, 15, 28, 16, 38, 29, 18],
		[46, 46, 46, 46, 46, 46, 46, 46],				[10, 10, 10, 10, 10, 10, 10, 10],				[15, 26, 17, 18, 37, 15, 16, 19]		  
]]
 ,[/*Этаж 5*/[
],[
		[12, 18, 16, 12, 13, 16, 15, 12, 18, 14],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 19, 21, 21, 21, 21, 21, 21, 19, 21],	
		[18, 18, 17, 18, 18, 18, 13, 15, 18, 16],		[10, 10, 10, 10, 30, 10, 10, 10, 32, 10],		[29, 26, 21, 15, 29, 16, 21, 21, 19, 21],
		[12, 13, 14, 18, 12, 18, 17, 18, 18, 13],		[10, 10, 10, 10, 10, 93, 10, 10, 10, 10],		[21, 21, 21, 19, 21, 37, 21, 10, 18, 21],
		[18, 18, 18, 18, 18, 13, 18, 18, 18, 12],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[11, 11, 11, 33, 12, 21, 15, 27, 32, 21],	
		[18, 18, 18, 18, 18, 18, 18, 13, 16, 17],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[91, 74, 73, 91, 57, 28, 18, 21, 21, 21],	
		[41, 18, 18, 41, 41, 18, 18, 12, 13, 14],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 77, 92, 21, 21, 80, 22, 21, 21, 21],
		[41, 18, 41, 18, 18, 18, 18, 18, 18, 18],		[10, 10, 10, 94, 39, 10, 10, 10, 10, 10],		[21, 79, 21, 98, 89, 94, 34, 29, 29, 29],
		[41, 18, 41, 41, 41, 18, 18, 16, 12, 13],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 79, 21, 21, 21, 17, 32, 21, 21, 21],
		[41, 18, 18, 41, 41, 18, 12, 17, 15, 17],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 85, 76, 21, 21, 19, 21, 21, 21, 21],	
		[41, 41, 18, 41, 41, 18, 15, 13, 18, 14],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 21, 79, 21, 21, 19, 21, 21, 35, 21]
],[
		[12, 18, 18, 18, 18, 18, 18, 18, 18, 13],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 25, 29, 29, 28, 29, 28, 29, 26, 21],	
		[11, 11, 12, 13, 18, 14, 18, 14, 15, 16],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[61, 61, 44, 21, 37, 21, 19, 21, 21, 21],
		[24, 23, 11, 11, 12, 17, 20, 17, 12, 13],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 21, 60, 61, 44, 21, 19, 21, 21, 21],
		[21, 21, 21, 21, 11, 30, 30, 30, 16, 14],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 21, 21, 21, 60, 45, 33, 12, 21, 21],	
		[21, 23, 21, 21, 21, 30, 40, 30, 40, 17],		[10, 10, 10, 10, 10, 10, 16, 10, 14, 10],		[21, 21, 21, 21, 21, 47, 61, 51, 12, 21],	
		[21, 21, 21, 21, 21, 40, 24, 30, 30, 14],		[10, 10, 10, 10, 10, 14, 10, 10, 10, 10],		[21, 21, 21, 21, 21, 67, 21, 50, 22, 21],
		[21, 21, 21, 26, 21, 21, 21, 30, 30, 15],		[10, 10, 10, 16, 10, 10, 10, 10, 10, 10],		[21, 21, 21, 65, 21, 21, 21, 50, 22, 21],
		[22, 21, 21, 27, 29, 30, 30, 30, 30, 14],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 21, 21, 55, 59, 58, 41, 54, 22, 21],
		[21, 24, 21, 21, 21, 30, 40, 30, 30, 16],		[10, 10, 10, 10, 10, 10, 14, 10, 10, 10],		[21, 21, 21, 21, 21, 55, 31, 31, 32, 21],	
		[21, 21, 23, 11, 11, 16, 12, 13, 15, 17],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 21, 21, 40, 41, 54, 21, 21, 21, 21]
],[
		[18, 18, 13, 18, 18, 41, 18, 18, 18, 18],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[15, 26, 21, 20, 82, 21, 98, 89, 89, 76],
		[18, 18, 16, 18, 18, 41, 18, 41, 18, 18],		[10, 10, 10, 10, 10, 10, 12, 10, 43, 10],		[25, 16, 21, 20, 82, 21, 95, 21, 98, 78],
		[17, 18, 18, 18, 18, 18, 18, 41, 41, 18],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 20, 29, 27, 33, 11, 32, 21, 21, 85],
		[15, 18, 13, 16, 18, 18, 12, 11, 41, 41],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 19, 21, 21, 17, 32, 83, 72, 21, 21],	
		[18, 18, 18, 18, 18, 16, 18, 15, 11, 41],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[15, 27, 28, 29, 26, 21, 35, 83, 72, 21],
		[18, 18, 18, 18, 18, 18, 18, 18, 18, 18],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[20, 36, 25, 28, 16, 15, 27, 29, 29, 29],
		[18, 18, 18, 18, 18, 18, 15, 18, 18, 18],		[10, 10, 14, 10, 10, 10, 10, 10, 10, 10],		[19, 15, 36, 19, 19, 19, 21, 38, 28, 29],
		[18, 18, 12, 18, 18, 18, 18, 18, 18, 14],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[19, 19, 21, 37, 20, 27, 28, 16, 19, 21],
		[18, 18, 18, 18, 18, 18, 18, 18, 18, 18],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 18],		[25, 21, 29, 29, 26, 15, 26, 25, 26, 35],
		[13, 18, 18, 18, 18, 18, 18, 18, 18, 18],		[10, 10, 10, 10, 10, 10, 10, 37, 10, 10],		[21, 37, 15, 29, 29, 27, 29, 29, 29, 26]
],[
		[41, 41, 18, 41, 41, 18, 15, 15, 18, 17],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 21, 79, 21, 21, 19, 21, 21, 19, 21],
		[41, 41, 18, 41, 41, 18, 13, 18, 18, 13],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 21, 79, 21, 21, 19, 21, 15, 26, 21],
		[18, 18, 18, 41, 41, 18, 16, 18, 13, 16],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[89, 89, 86, 21, 21, 19, 21, 19, 21, 21],
		[41, 41, 41, 41, 18, 18, 17, 18, 14, 15],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 21, 21, 21, 15, 26, 21, 19, 21, 21],	
		[41, 41, 41, 18, 18, 13, 18, 18, 18, 18],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 21, 21, 15, 26, 21, 15, 27, 28, 29],
		[18, 18, 18, 18, 13, 18, 18, 16, 18, 16],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[71, 71, 71, 18, 21, 10, 18, 21, 19, 21],
		[18, 18, 18, 18, 18, 18, 18, 14, 18, 14],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[31, 31, 14, 34, 29, 27, 32, 21, 19, 21],
		[14, 14, 18, 18, 13, 15, 13, 15, 18, 17],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 21, 30, 18, 21, 21, 21, 21, 19, 21],
		[13, 12, 16, 18, 18, 18, 18, 18, 18, 16],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 21, 21, 25, 29, 29, 29, 28, 26, 21],
		[17, 16, 14, 13, 16, 15, 13, 18, 15, 12],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 21, 21, 21, 21, 21, 21, 19, 21, 21]
],[
		[12, 12, 31, 31, 31, 31, 31, 31, 31, 13],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 21, 10, 33, 11, 11, 11, 11, 12, 21],	
		[16, 34, 31, 31, 31, 31, 31, 33, 31, 11],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 10, 24, 21, 21, 21, 21, 43, 56, 61],
		[13, 31, 31, 31, 31, 31, 37, 31, 21, 23],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 20, 21, 21, 43, 61, 61, 62, 21, 21],
		[31, 32, 31, 31, 31, 21, 24, 21, 21, 21],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[10, 24, 21, 43, 62, 21, 21, 21, 21, 21],	
		[31, 31, 31, 31, 22, 21, 21, 21, 21, 21],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[34, 21, 21, 52, 21, 21, 21, 21, 21, 21],	
		[35, 31, 31, 31, 29, 28, 21, 21, 21, 21],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[20, 21, 43, 57, 59, 46, 21, 21, 21, 21],
		[31, 31, 36, 21, 21, 25, 21, 21, 21, 21],		[10, 10, 10, 10, 10, 16, 10, 10, 10, 10],		[20, 43, 62, 21, 21, 67, 21, 21, 21, 21],
		[31, 31, 22, 21, 21, 21, 24, 21, 21, 21],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[20, 52, 21, 21, 21, 21, 21, 21, 21, 21],
		[31, 31, 23, 21, 21, 21, 21, 21, 23, 21],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[20, 52, 21, 21, 21, 21, 21, 21, 21, 21],	
		[31, 31, 21, 21, 21, 21, 21, 21, 21, 21],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[20, 52, 21, 21, 21, 21, 21, 21, 21, 21]
],[
		[13, 14, 15, 13, 15, 16, 12, 18, 18, 18],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 21, 21, 21, 21, 21, 21, 17, 11, 11],
		[16, 18, 18, 18, 13, 17, 18, 18, 18, 18],		[10, 45, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 10, 11, 12, 21, 21, 15, 27, 31, 61],
		[14, 18, 18, 18, 18, 18, 18, 13, 11, 21],		[10, 10, 94, 10, 10, 10, 10, 10, 10, 10],		[21, 20, 21, 34, 29, 29, 26, 43, 62, 21],
		[13, 18, 18, 18, 13, 13, 15, 11, 21, 21],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 30, 39, 32, 21, 21, 43, 62, 21, 21],	
		[12, 17, 18, 13, 16, 15, 11, 21, 21, 21],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 21, 19, 21, 21, 43, 62, 21, 21, 21],
		[16, 15, 18, 17, 16, 11, 21, 21, 21, 21],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 21, 19, 21, 21, 52, 21, 21, 21, 21],
		[14, 18, 18, 15, 18, 18, 21, 21, 21, 21],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 10, 18, 21, 15, 36, 21, 21, 21, 21],
		[18, 18, 18, 18, 18, 11, 21, 21, 21, 21],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[29, 69, 34, 29, 26, 52, 21, 21, 21, 21],
		[12, 18, 18, 13, 16, 11, 21, 21, 21, 21],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 30, 32, 21, 21, 52, 21, 21, 21, 21],
		[16, 17, 15, 16, 14, 12, 11, 21, 21, 21],		[10, 10, 10, 10, 10, 10, 10, 10, 10, 10],		[21, 21, 21, 21, 21, 53, 42, 21, 21, 21]
]]
];
$(document).ready(function(){	
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/	
for(let f = 1; f < 6; f++){
	for(let s = 1; s < maze[f].length; s++){
		for(let y = 0; y < maze[f][s].length; y++){
			let t = "";
			if( y%3 == 0){
				for (let x = 0; x < maze[f][s][y].length; x++) {
					t = t + "<div class='bg"+maze[f][s][y][x]+" o0'><div class='tx"+maze[f][s][y+1][x]+"' onmouseout='closer();' onmouseover='helper(this);'><div id='f"+f+"s"+s+"x"+(6-f+x)+"y"+(6-f+y/3)+"' class='wl"+maze[f][s][y+2][x]+"' onclick='clickW(this)'></div></div></div>";
				}
			}
			if( t != "" )$(".f"+f+"s"+s).append("<div class='abscissa'>"+t+"</div>");
		}
	}	
}	
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
	const house = [[
],[ //Начало [6]
		[41, 42, 43, 44, 45, 46],		[78, 10, 10, 78, 78, 78],		[10, 11, 12, 35, 10, 12],	
		[51, 52, 42, 43, 42, 43],		[78, 15, 10, 10, 10, 16],		[20, 21, 13, 39, 14, 22],
		[41, 42, 43, 42, 53, 54],		[78, 10, 10, 10, 78, 78],		[30, 31, 32, 19, 30, 32],
		[42, 43, 42, 43, 42, 55],		[76, 10, 10, 10, 77, 78],		[10, 11, 11, 23, 11, 12],	
		[61, 62, 63, 42, 56, 57],		[78, 78, 78, 10, 78, 78],		[20, 21, 21, 21, 21, 22],	
		[64, 65, 66, 43, 42, 43],		[78, 78, 78, 10, 80, 16],		[30, 31, 31, 31, 31, 32]
],[ //Личный дом [7]
		[11, 12, 13, 14, 15, 16],		[78, 10, 10, 78, 78, 78],		[10, 11, 12, 35, 10, 12],	
		[21, 22, 12, 13, 12, 13],		[78, 15, 10, 10, 10, 16],		[20, 21, 13, 39, 14, 22],
		[11, 12, 13, 12, 23, 24],		[78, 10, 10, 10, 78, 78],		[30, 31, 32, 19, 30, 32],
		[12, 13, 12, 13, 12, 25],		[10, 10, 10, 10, 10, 78],		[10, 11, 11, 23, 11, 12],	
		[31, 32, 33, 12, 26, 27],		[78, 78, 78, 10, 78, 78],		[20, 21, 21, 21, 21, 22],	
		[34, 35, 36, 13, 12, 13],		[78, 78, 78, 10, 10, 10],		[30, 31, 31, 31, 31, 32]
],[ //Конец [8]
		[41, 42, 43, 44, 45, 46],		[78, 10, 10, 78, 78, 78],		[10, 11, 12, 35, 10, 12],	
		[51, 52, 42, 43, 42, 43],		[78, 15, 10, 10, 10, 16],		[20, 21, 13, 39, 14, 22],
		[41, 42, 43, 42, 53, 54],		[78, 10, 10, 10, 78, 78],		[30, 31, 32, 19, 30, 32],
		[42, 43, 42, 43, 42, 55],		[10, 10, 10, 10, 10, 78],		[10, 11, 11, 23, 11, 12],	
		[61, 62, 63, 42, 56, 57],		[78, 78, 78, 10, 78, 78],		[20, 21, 21, 21, 21, 22],	
		[64, 65, 66, 43, 42, 43],		[78, 78, 78, 10, 10, 10],		[30, 31, 31, 31, 31, 32]
]];
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
for(let h = 1; h < 4; h++){
	for(let y = 0; y < house[h].length; y++){
		let t = "";
		if( y%3 == 0){
			for (let x = 0; x < house[h][y].length; x++){
				t = t + "<div class='bg"+house[h][y][x]+"'><div class='tx"+house[h][y+1][x]+"' onmouseout='closer();' onmouseover='helper(this);'><div id='f"+(h+5)+"s4x"+(x+1)+"y"+(y/3+1)+"' class='wl"+house[h][y+2][x]+"' onclick='clickW(this)'></div></div></div>";
			}
		}
		if(t != "")$(".cube"+(h+5)).append("<div class='abscissa'>"+t+"</div>");
	}	
}
});	
/*==================================================================================================================================================*/	
	function openGun(o){
		$("#"+$(o).attr("id")+"Enter").attr("style","left:60px;");
		if($(o).attr("id") == "avatar")
		$(".helper").html(addhelper($("#avatar div").attr("class").slice(2,4)));
	}
	function closeGun(c){$("#"+$(c).attr("id")+"Enter").attr("style","left:-36px;"); closer();}
	function openGunEnter(o){$("#"+$(o).attr("id").slice(0,-5)+"Enter").attr("style","left:60px;");}
	function closeGunEnter(c){$("#"+$(c).attr("id").slice(0,-5)+"Enter").attr("style","left:-36px;");}	
	function openBackpack(){
		if($("#backpack").attr("there") == "1"){ sound("backpack");
			if($("#backpack").css("left") == "-134px"){$("#backpack").css("left","0px"); $(".enterr").css("left","134px")}
				else{$("#backpack").css("left","-134px"); $(".enterr").css("left","0px")}
		}else{message("У вас нет сумки","rОшибка")}
	}
	function info(m){
		setTimeout(function(){$(".helper").html(m);},50)
		setTimeout(function(){$(".helper").html("");},2050)
	}	
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
</script>
<div class="choice">
	<div class="choiceR" id="c1">управление</div>
	<div class="c1">
		<div class="wasdtab">
			<div class="wasd">
				<div class="b1">1</div>
				<div class="b2">2</div>
				<div class="b3">3</div>
				<div class="bw o0" style="cursor: default"></div>
				<div class="be o0" style="cursor: default"></div>
			</div>
			<div class="wasd">
				<div class="bq">Q</div>
				<div class="bw">W</div>
				<div class="be">E</div>
				<div class="bw" style="font-size: 30px; background: #eee; cursor: default">+</div>
				<div class="be"><img src="img/cursor.png" width="20px" height="20px"></div>
			</div>
			<div class="wasd">
				<div class="ba">A</div>
				<div class="bs">S</div>
				<div class="bd">D</div>
				<div class="bw o0" style="cursor: default"></div>
				<div class="be o0" style="cursor: default"></div>
			</div>
		</div>		
	</div>
	<div class="choiceR" id="c2">выбор сложности</div>
	<div class="c2 s0h0">
		<input type="radio" id="hard" name="choice"><label for="hard" class="hard" onclick='radio(this);'>уважаемый человек</label>
		<input type="radio" id="medium" name="choice"><label for="medium" class="medium" onclick='radio(this);'>мне бы побыстрее пройти</label>
		<input type="radio" id="easy" name="choice"><label for="easy" class="easy" onclick='radio(this);'>я пуся и казуал</label>
		<div class="hme"></div>		
	</div>
	<div id="startgame">начать</div>
</div>
<div class="content">
	<div class="c2f"><div class="ndis cube1" style="transform: rotateX(0deg) rotateY(-180deg)" rx="0" rY="0">
		<div class="f1s1 side"></div>	
		<div class="f1s2 side"></div>	
		<div class="f1s3 side"></div>	
		<div class="f1s4 side"></div>
		<div class="f1s5 side"></div>	
		<div class="f1s6 side"></div>			
	</div></div>	
	<div class="c2f"><div class="ndis cube2" style="transform: rotateX(0deg) rotateY(-180deg)" rx="0" rY="0">
		<div class="f2s1 side"></div>	
		<div class="f2s2 side"></div>	
		<div class="f2s3 side"></div>	
		<div class="f2s4 side"></div>
		<div class="f2s5 side"></div>	
		<div class="f2s6 side"></div>			
	</div></div>	
	<div class="c2f"><div class="ndis cube3" style="transform: rotateX(0deg) rotateY(-180deg)" rx="0" rY="0">
		<div class="f3s1 side"></div>	
		<div class="f3s2 side"></div>	
		<div class="f3s3 side"></div>	
		<div class="f3s4 side"></div>
		<div class="f3s5 side"></div>	
		<div class="f3s6 side"></div>			
	</div></div>
	<div class="c2f"><div class="ndis cube4" style="transform: rotateX(0deg) rotateY(-180deg)" rx="0" rY="0">
		<div class="f4s1 side"></div>	
		<div class="f4s2 side"></div>	
		<div class="f4s3 side"></div>	
		<div class="f4s4 side"></div>
		<div class="f4s5 side"></div>	
		<div class="f4s6 side"></div>			
	</div></div>
	<div class="c2f"><div class="ndis cube5" style="transform: rotateX(0deg) rotateY(-180deg)" rx="0" rY="0">
		<div class="f5s1 side"></div>	
		<div class="f5s2 side"></div>	
		<div class="f5s3 side"></div>	
		<div class="f5s4 side"></div>
		<div class="f5s5 side"></div>	
		<div class="f5s6 side"></div>	
	</div></div>
	<div class="c2f"><div class="cube6"></div></div>
	<div class="c2f"><div class="ndis cube7"></div></div>	
	<div class="c2f"><div class="ndis cube8"></div></div>	
	
	<div class="potion" style="transform:translateY(-48px)">
		<div class="ap50" style="display: none;">Ночное зрение: 0</div>
		<div class="ap53" style="display: none;">Остановка времени: 0</div>		
	</div>	
	<div class="shopBG" style="z-index: -1; background: rgba(0, 0, 0, 0); opacity: 0;" shop="0">
		<div class="shopB ndis" id="shop1">
			<div class="minusButton">отмена</div>
			<div class="plusButton ndis">купить</div>		
			<input type="checkbox" id="item11" name="bI1"><label for="item11" class="tx81 item11" price="20" onmouseout='closer();' onmouseover='helper(this);'></label>
			<input type="checkbox" id="item12" name="bI1"><label for="item12" class="tx82 item12" price="20" onmouseout='closer();' onmouseover='helper(this);'></label>
			<input type="checkbox" id="item13" name="bI1"><label for="item13" class="tx83 item13" price="20" onmouseout='closer();' onmouseover='helper(this);'></label>
			<input type="checkbox" id="item14" name="bI1"><label for="item14" class="tx84 item14" price="20" onmouseout='closer();' onmouseover='helper(this);'></label>
			<input type="checkbox" id="item15" name="bI1"><label for="item15" class="tx81 item15" price="20" onmouseout='closer();' onmouseover='helper(this);'></label>
			<input type="checkbox" id="item16" name="bI1"><label for="item16" class="tx83 item16" price="20" onmouseout='closer();' onmouseover='helper(this);'></label>
		</div>
		<div class="shop ndis" id="shop2">
			<div class="minusButton">отмена</div>
			<div class="plusButton ndis">купить</div>		
			<input type="checkbox" id="item21" name="bI2"><label for="item21" class="tx60 item21" price="0" onmouseout='closer();' onmouseover='helper(this);'></label>
			<input type="checkbox" id="item22" name="bI2"><label for="item22" class="tx61 item22" price="3" onmouseout='closer();' onmouseover='helper(this);'></label>
			<input type="checkbox" id="item23" name="bI2"><label for="item23" class="tx65 item23" price="0" onmouseout='closer();' onmouseover='helper(this);'></label>
		</div>
		<div class="shop ndis" id="shop3">
			<div class="minusButton">отмена</div>
			<div class="plusButton ndis">купить</div>		
			<input type="checkbox" id="item31" name="bI3"><label for="item31" class="tx52 item31" price="0" onmouseout='closer();' onmouseover='helper(this);'></label>
			<input type="checkbox" id="item32" name="bI3"><label for="item32" class="tx57 item32" price="0" onmouseout='closer();' onmouseover='helper(this);'></label>
			<input type="checkbox" id="item33" name="bI3"><label for="item33" class="tx54 item33" price="0" onmouseout='closer();' onmouseover='helper(this);'></label>
		</div>
		<div class="shop ndis" id="shop4">
			<div class="minusButton">отмена</div>
			<div class="plusButton ndis">купить</div>		
			<input type="checkbox" id="item41" name="bI4"><label for="item41" class="item41" price="10" onmouseout='closer();' onmouseover='helper(this);'>+25%</label>
			<input type="checkbox" id="item42" name="bI4"><label for="item42" class="item42" price="18" onmouseout='closer();' onmouseover='helper(this);'>+50%</label>
			<input type="checkbox" id="item43" name="bI4"><label for="item43" class="item43" price="24" onmouseout='closer();' onmouseover='helper(this);'>+75%</label>
		</div>
	</div>	
	<div class="stw">
		<div class="wait"><div class="waitScroll" wait="0"></div></div>
		<div class="stepTime">
			<div class="time">08<br>50</div>
			<div class="step">0</div>
		</div>
	</div>
	<div class="gun">
		<div id="avatar" onmouseover='openGun(this);' onmouseout='closeGun(this);'><div class="tx90"></div></div>		
			<div id="avatarEnter" onmouseover='openGunEnter(this);' onmouseout='closeGunEnter(this);'>
				<div id="avatarOpenBackpack" onclick='openBackpack();'>сумка</div>
				<div id="avatarWait">ждать</div>
			</div>	
		<div class="money">0</div>
		<div id="backpack" style="left: -134px;" there="0" compass="0">
			<div id="slot1" class="tx10" onmouseover='openGun(this);' onmouseout='closeGun(this);'></div>
			<div id="slot2" class="tx10" onmouseover='openGun(this);' onmouseout='closeGun(this);'></div>	
			<div id="slot3" class="tx10" onmouseover='openGun(this);' onmouseout='closeGun(this);'></div>
			<div id="slot4" class="tx10"></div>
			<div id="slot5" class="tx10"></div>
			<div id="slot6" class="tx10"></div>
			<div id="slot7" class="tx10"></div>
			<div id="slot8" class="tx10"></div>
			<div id="slot9" class="tx10"></div>			
		</div>	
		<div class="enterr" style="left:0px">
			<div id="slot1Enter" onmouseover='openGunEnter(this);' onmouseout='closeGunEnter(this);'>
				<div id="slot1Drop">выбросить</div>
				<div id="slot1Use">применить</div>
			</div>
			<div id="slot2Enter" onmouseover='openGunEnter(this);' onmouseout='closeGunEnter(this);'>
				<div id="slot2Drop">выбросить</div>
				<div id="slot2Use">применить</div>
			</div>	
			<div id="slot3Enter" onmouseover='openGunEnter(this);' onmouseout='closeGunEnter(this);'>
				<div id="slot3Drop">выбросить</div>
				<div id="slot3Use">применить</div>
			</div>	
		</div>
	</div>
	<div class="helper" style="transform:translateY(48px)"></div>
	<div class="openmes"></div>
	<div class="meslog" quest="0"><div class="meslog2" mesnum="1" scroll="0"><div id="mes0" timer="end"></div></div></div>
</div>
<div class="dead">
	<div class="gamer"></div>	
	<div class="BH3">
		<oo>В</oo><oo>А</oo><oo>С</oo><oo>&nbsp;</oo>
		<oo>Н</oo><oo>А</oo><oo>С</oo><oo>Т</oo><oo>И</oo><oo>Г</oo><oo>Л</oo><oo>А</oo><oo>&nbsp;</oo>
		<oo>З</oo><oo>А</oo><oo>С</oo><oo>У</oo><oo>Х</oo><oo>А</oo>
	</div>
	<div id="continue">озелениться</div></div>
<div class="loading"></div>	
<div class="start"></div>	
<div class="end">
	<div class="hb">
		<oo>С</oo><oo>&nbsp;</oo><oo>Д</oo><oo>н</oo><oo>е</oo><oo>м</oo><oo>&nbsp;</oo>
		<oo>Р</oo><oo>о</oo><oo>ж</oo><oo>д</oo><oo>е</oo><oo>н</oo><oo>и</oo><oo>я</oo><oo>,</oo><oo>&nbsp;</oo>
		<oo>Р</oo><oo>ы</oo><oo>б</oo><oo>к</oo><oo>а</oo><oo>!</oo>
	</div>
	<div class="endresult">Результаты</div>
	<div class="endhme">Сложность: </div>
	<div class="endstep">Количество ходов: 0</div>
	<div class="endmoney">Собрано монет: 0</div>
	<div class="endquest">Заказов выполнено: 0</div>
	<div class="endhammer">Стен разрушено: 0/9</div>
	<div class="endchest">Сундуков открыто: 0</div>
	<div class="endenemy">Повержено врагов: 0</div>
	<div class="enddead">Количество смертей: 0</div>	
	<div class="endmap">Карта открыта на: 0%</div>
</div>	
</body></html>
<script>
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
	$(".choice #c2 , .choice #c1").on("click", function(){$(".c2 , .c1").toggleClass("s0h0");})
	function radio(r){
		var f1 = $(r).attr("for");
		$(".choice").attr("choice",f1);
		if(f1=="hard"){
			$(".hme").html("Увеличенное количество врагов<br>Дорогостоящее вооружение и зелья<br>Забывание части изученное территории после получения урона<br>Ожидание стоит золота");
			$(".endhme").html("Сложность: уважаемый человек")
		}
		if(f1=="medium"){$(".hme").html("Восстановление здоровья после сна<br>Ежедневный денежный бонус"); $(".endhme").html("Сложность: мне бы побыстрее пройти")}
		if(f1=="easy"){$(".hme").html("Открытая карта<br>Отсутствие врагов"); $(".endhme").html("Сложность: я пуся и казуал")}
	}	
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/		
	$("#startgame").on("click", function(){
		if($(".choice").attr("choice")==null){alert("Выберите сложность")}else{
			setTimeout(function(){enemySpawn(); chestSpawn(); move("#f6s4x2y2", "#f6s4x2y2", 0, 0)},50);
			$(".loading").attr("style", "z-index:81; background:#fff; transition:1s");
			setTimeout(function(){
				if($(".choice").attr("choice")=="easy"){
					$("[id^='f4'], [id^='f3'], [id^='f2'], [id^='f1']").parent().parent().removeClass("o0")
				}
				$(".loading").attr("style", "z-index:81; opacity:0; transition:1s");
				$(".choice").css("display","none");
				setTimeout(function(){$(".loading").attr("style", "z-index:-1");},1000);
			},1000)		
			$("#f6s4x2y2").html("<gamer style='background: url('img/H.png')'></gamer>");
			$("[id^='f5']").parent().parent().removeClass("o0");
		}
	})
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/	
	function sound(s){
		if(s=="dmg"){new Audio('sound/damage.m4a').play();}
		if(s=="mes"){new Audio('sound/message.m4a').play();}
		if(s=="bell"){new Audio('sound/bell.m4a').play();}
		if(s=="backpack"){new Audio('sound/backpack.m4a').play();}
		if(s=="bow"){new Audio('sound/bow.m4a').play();}
		if(s=="sword"){new Audio('sound/sword.m4a').play();}
	}
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
	var chestPos = ["","#f5s1x9y10", "#f5s5x9y1", "#f5s3x4y8", "#f5s3x7y1", "#f4s4x3y4", "#f4s5x4y7", "#f4s3x2y2", "#f4s3x7y8", "#f4s5x7y5", "#f3s6x3y5", "#f3s2x5y5", "#f3s4x3y8", "#f3s4x4y6", "#f3s1x7y7", "#f4s2x2y6", "#f4s2x3y7", "#f3s2x8y8", "#f1s5x5y6", "#f2s1x6y5", "#f2s5x4y6", "#f4s4x5y8", "#f4s4x5y9", "#f4s4x5y7", "#f3s4x3y7"];
	function chestSpawn(){
		for(var e=1; e<chestPos.length; e++){
			if($(chestPos[e]).parent().attr("class").slice(0,4)=="tx10"){
				var eClass = $(chestPos[e]).parent().attr("class").slice(4);
				$(chestPos[e]).parent().attr("class","tx17"+eClass);	
			}
		}	
	}
	function openChest(){
		var rC = random(1,10);	
		var eClass = $("gamer").parent().parent().attr("class").slice(4);
		$("gamer").parent().parent().attr("class","tx10"+eClass);
		questKill(4);
		var endchest = $(".endchest").html().slice(18);
		$(".endchest").html("Сундуков открыто: "+(+endchest+1));
		if(rC==1){heal("m1"); message("Сундук был ловушкой","rНеудача")}
		if(rC==2 || rC==3){message("Сундук пуст","rНеудача")}
		if(rC==4 || rC==5 || rC==6 || rC==7){
			var money = random(5,20);
			message("Вы нашли "+money+" золота!","gУспех");
			addMoney(money,money);
		}
		if(rC==8){
			var money = random(20,30); heal("p2");
			message("Вы нашли "+money+" золота!","gУспех");
			addMoney(money,money);
		}
		if(rC==9){
			$("gamer").parent().parent().attr("class","tx"+random(50,57)+eClass);
			message("Вы нашли зелье!","gУспех");
		}
		if(rC==10){
			$("gamer").parent().parent().attr("class","tx"+random(64,60)+eClass);
			message("Вы нашли меч!","gУспех");
		}		 
	}	
/*==================================================================================================================================================*/	
/*==================================================================================================================================================*/
	var enemy = [[],
	["#f4s6x5y6", "tx2", "y+","x+","y-","x-"],
	["#f4s6x6y2", "tx2", "x+", "x+", "x-", "x-"],
	["#f4s5x6y7", "tx2", "x-", "y-", "y-", "x-", "y-", "x+", "x+", "y+", "y+", "y+"],
	["#f4s1x9y6", "tx2", "x-", "x-", "y-", "y-", "x+", "x+", "y+", "y+"],
	["#f4s5x7y3", "tx2", "x+", "x+", "y+", "x-", "x-", "y-"],
	["#f4s6x3y6", "tx2", ""],
	["#f4s6x6y9", "tx2", ""],		
	["#f4s4x2y3", "tx2", ""],
	["#f4s3x6y6", "tx2", ""],
	["#f4s5x5y8", "tx2", ""],
	["#f4s2x7y7", "tx2", ""],				 

	["#f3s1x7y5", "tx2", ""],
	["#f3s5x7y5", "tx2", ""],
	["#f3s2x7y4", "tx2", ""],
	["#f3s4x7y4", "tx2", ""],
	["#f3s1x5y6", "tx2", ""],
	["#f3s6x5y4", "tx2", "x+", "x+", "y+", "y+", "x-", "x-", "y-", "y-"],
	["#f3s6x7y6", "tx2", "x-", "x-", "y-", "y-", "x+", "x+", "y+", "y+"],
	["#f3s3x4y5", "tx2", "y+", "y+", "y+", "y-", "y-", "y-"],
	["#f3s3x6y7", "tx2", "y+", "y-", "y-", "y-", "y+", "y+"],				 
	
	["#f2s2x6y4", "tx2", ""],			 
	["#f2s5x4y7", "tx2", ""],
				 
	["#f1s4x6y5", "tx2", ""],			 
	["#f1s4x5y6", "tx2", ""],			 
	["#f1s3x6y6", "tx2", ""]	
	];	
var enemyHard = [[],
	["#f4s4x4y6", "tx2", "x+", "x+", "x-", "x-"],
	["#f4s5x4y4", "tx2", "x+", "x+", "y+", "y+", "y+", "x-", "y-", "y-", "x-", "y-"],
	["#f4s1x7y4", "tx2", "x+", "x+", "y+", "y+", "x-", "x-", "y-", "y-"],
	["#f4s1x3y3", "tx2", "x+", "y+", "x+", "x+", "y+", "x-", "x-", "x-", "y-", "y-"],
	["#f4s1x3y6", "tx2", ""],
	["#f4s6x9y4", "tx2", ""],	
	["#f4s4x6y2", "tx2", ""],
	["#f4s1x6y7", "tx2", ""],
	["#f4s3x5y4", "tx2", ""],
	["#f4s2x7y5", "tx2", ""],
	["#f4s4x9y8", "tx2", ""],
	["#f4s3x4y9", "tx2", ""],
				 
	["#f3s1x5y5", "tx2", ""],
	["#f3s3x7y4", "tx2", ""],
	["#f3s2x7y8", "tx2", ""],
	["#f3s4x4y5", "tx2", ""],
	["#f3s4x7y6", "tx2", ""],
	["#f3s1x7y6", "tx2", ""],
	["#f3s6x7y4", "tx2", "y+", "y+", "x-", "x-", "y-", "y-", "x+", "x+"],
	["#f3s6x5y6", "tx2", "y-", "y-", "x+", "x+", "y+", "y+", "x-", "x-"],
	["#f3s3x5y6", "tx2", "y+", "y+", "y-", "y-", "y-", "y+"],
			 
	["#f2s2x7y5", "tx2", ""],				 
	["#f2s5x4y5", "tx2", ""],
	["#f2s1x5y5", "tx2", ""],
				 		 
	["#f1s4x6y6", "tx2", ""],
	["#f1s3x6y5", "tx2", ""],			 
	["#f1s5x6y6", "tx2", ""]
	];	
	function enemySpawn(){
		if($(".choice").attr("choice")!="easy"){
			for(var e=1; e<enemy.length; e++){
				if("#"+$("gamer").parent().attr("id") != enemy[e][0] && $(enemy[e][0]).parent().attr("class").slice(0,4)=="tx10"){
					var eClass = $(enemy[e][0]).parent().attr("class").slice(4);
					$(enemy[e][0]).parent().attr({"id":"enemy"+e, "class":enemy[e][1]+random(1,9)+eClass, "step":"1"});	
				}
			}
		}
		if($(".choice").attr("choice")=="hard"){
			for(var a=1; a<enemyHard.length; a++){
				if("#"+$("gamer").parent().attr("id") != enemyHard[a][0] && $(enemyHard[a][0]).parent().attr("class").slice(0,4)=="tx10"){
					var aClass = $(enemyHard[a][0]).parent().attr("class").slice(4);
					$(enemyHard[a][0]).parent().attr({"id":"enemy"+(+a+26), "class":enemyHard[a][1]+random(1,9)+aClass, "step":"1"});	
				}
			}
		}
	}	
	function enemyMove(){
		var gamerID = "#"+$("gamer").parent().attr("id");
		if($(".choice").attr("choice")!="easy"){
		for(var e=1; e<enemy.length; e++){
			var enemyID = "#"+$("#enemy"+e+" div").attr("id");
			if(enemyID.slice(0,2)=="#f" && $(enemyID).parent().attr("class").slice(2,3)=="2"){
				var step = +$(enemyID).parent().attr("step")+1;					
				if(+step == enemy[e].length){var step = 2}
				if(enemy[e][step]==""){var r = 0}
				if(enemy[e][step]=="x-"){var r = 1}
				if(enemy[e][step]=="y+"){var r = 2}
				if(enemy[e][step]=="x+"){var r = 3}
				if(enemy[e][step]=="y-"){var r = 4}				
				var enemyClass = $(enemyID).parent().attr("class");
				var enemyNewClass = $(roll(enemyID)[r][0]).parent().attr("class");	
				if(roll(enemyID)[r][0] == gamerID){$(enemyID).parent().attr({"id":"", "step":"", "class":"tx10"+enemyClass.slice(4)}); heal("m1");addMoney(10,14);}
					else{
						if($(enemyID).parent().attr("class").slice(5)=="light"){
							if(mS(1)=="13" || mS(2)=="13" || mS(3)=="13"){
								$(enemyID).parent().attr({"id":"", "step":"", "class":"tx10"+enemyClass.slice(4)}); heal("m1");addMoney(10,14);
							}else{
								$(roll(enemyID)[r][0]).parent().attr({"id":"enemy"+e, "step":step, "class":enemyClass.slice(0,4)+enemyNewClass.slice(4)});
								$(enemyID).parent().attr({"id":"", "step":"", "class":enemyNewClass.slice(0,4)+enemyClass.slice(4)});
							}
						}else{
							$(roll(enemyID)[r][0]).parent().attr({"id":"enemy"+e, "step":step, "class":enemyClass.slice(0,4)+enemyNewClass.slice(4)});
							$(enemyID).parent().attr({"id":"", "step":"", "class":enemyNewClass.slice(0,4)+enemyClass.slice(4)});
						}
					}
			}else{$(enemyID).parent().attr({"id":"", "step":""});}
		} 
	}
	if($(".choice").attr("choice")=="hard"){
		for(var a=27; a<enemyHard.length+26; a++){
			var enemyID = "#"+$("#enemy"+a+" div").attr("id");
			if(enemyID.slice(0,2)=="#f" && $(enemyID).parent().attr("class").slice(2,3)=="2"){
				var step = +$(enemyID).parent().attr("step")+1;	
				if(+step == enemyHard[a-26].length){var step = 2}
				if(enemyHard[a-26][step]==""){var r = 0}
				if(enemyHard[a-26][step]=="x-"){var r = 1}
				if(enemyHard[a-26][step]=="y+"){var r = 2}
				if(enemyHard[a-26][step]=="x+"){var r = 3}
				if(enemyHard[a-26][step]=="y-"){var r = 4}				
				var enemyClass = $(enemyID).parent().attr("class");
				var enemyNewClass = $(roll(enemyID)[r][0]).parent().attr("class");			
				if(roll(enemyID)[r][0] == gamerID){$(enemyID).parent().attr({"id":"", "step":"", "class":"tx10"+enemyClass.slice(4)}); heal("m1");addMoney(10,14);
					}else{
						if($(enemyID).parent().attr("class").slice(5)=="light"){
							if(mS(1)=="13" || mS(2)=="13" || mS(3)=="13"){
								$(enemyID).parent().attr({"id":"", "step":"", "class":"tx10"+enemyClass.slice(4)}); heal("m1");addMoney(10,14);
							}else{
								$(roll(enemyID)[r][0]).parent().attr({"id":"enemy"+a, "step":step, "class":enemyClass.slice(0,4)+enemyNewClass.slice(4)});
								$(enemyID).parent().attr({"id":"", "step":"", "class":enemyNewClass.slice(0,4)+enemyClass.slice(4)});
							}
						}else{
							$(roll(enemyID)[r][0]).parent().attr({"id":"enemy"+a, "step":step, "class":enemyClass.slice(0,4)+enemyNewClass.slice(4)});
							$(enemyID).parent().attr({"id":"", "step":"", "class":enemyNewClass.slice(0,4)+enemyClass.slice(4)});
						}
					}
			}else{$(enemyID).parent().attr({"id":"", "step":""});}
		} 
	} 
	}
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
	function random(min, max){return Math.round(min - 0.5 + Math.random()*(max - min + 1));}
	function addMoney(a,b){
		var money = +$(".money").html();
		var randommoney = random(a,b);
		$(".money").html(+money+randommoney);		
		var endmoney = +$(".endmoney").html().slice(15);
		$(".endmoney").html("Собрано монет: "+(+randommoney+endmoney))
	}
	function removeMoney(a,b){
			var money = $(".money").html();
			$(".money").html(+money-random(a,b));
	}
/*==================================================================================================================================================*/
	function heal(pm){
		var hp = $("#avatar div").attr("class").slice(-2);
		var myID = "#"+$("gamer").parent().attr("id");
		if(pm.slice(0,1) == "m"){
			$(".c2f").css("animation","damage .2s ease");
			$(".content").css("background","#280404");
			if(+hp-pm.slice(-1) > 70){
				$("#avatar div").attr("class","tx"+(+hp-pm.slice(-1))); 
				sound("dmg");
				if($(".loading").html().slice(0,3) == "Сон"){message("Во время биосна вас осушили! [-"+(pm.slice(-1)*25)+"%]","rЗдоровье");}
					else{if($(".choice").attr("choice")=="hard"){
						message("Береги водный баланс! [-"+(pm.slice(-1)*25)+"%]<br>[После тяжелого удара вы забыли 33% исследуемой территории]","rЗдоровье");
					}else{message("Береги водный баланс! [-"+(pm.slice(-1)*25)+"%]","rЗдоровье");}
					}	
				if($(".choice").attr("choice")=="hard"){
					var memory = +$(".step").html();
					for(var m=1; m<memory; m++){
						var r = random(1,3);
						if(r==2){$("[memory='"+m+"']").parent().parent().addClass("o0");}
					}
				}
				$(myID).parent().parent().removeClass("o0");
			}else{
				$(".dead").attr("style","z-index:100; opacity:1");
				$("#avatar div").attr("class","tx70");
				setTimeout(function(){sleep(72);},100);
				var enddead = $(".enddead").html().slice(20);
				$(".enddead").html("Количество смертей: "+(+enddead+1));
			}
		}else{
			if(+hp==74){message("В вас достаточно жидкости","gЗдоровье");return false}
				else{if(+hp==73){$("#avatar div").attr("class","tx74"); message("Водный баланс восстановлен [+25%]","gЗдоровье")}
						else{{$("#avatar div").attr("class","tx"+(+hp+ +pm.slice(-1))); message("Водный баланс восстановлен [+"+(pm.slice(-1)*25)+"%]","gЗдоровье")}}
					$(".content").css("background","#1c380b");}
		}
		setTimeout(function(){$(".content").css("background","#170a02"); $(".c2f").css("animation","");},200);
	}
/*==================================================================================================================================================*/	
	$("#continue").on("click",function(){
		if($(".dead").css("opacity")=="1"){ setTimeout(function(){ 
			var money = +$(".money").html()/3;
			$(".money").html(money.toFixed(0));		
			$(".dead").attr("style","z-index:-1; opacity:0");
			$("#avatar div").attr("class","tx74");
			setTimeout(function(){
				teleport("#f7s4x2y2");
				message("Цена за лечение: 66% золота<br>Вы проспали 12 часов", "gОзеленение");		
			},100);
		},500)}
	})
/*==================================================================================================================================================*/
	$("[id^='slot']").hover(function(){
		var thisClass = $(this).attr("class").slice(0,4);
		var thisID = $(this).attr("id");
		if($("#backpack").css("left") != "-134px"){
			$("[id^='slot']").draggable({stack:"[id^='slot']",containment: "#backpack",revert: true,revertDuration: 0})}
		else{$("[id^='slot']").draggable({stack:"[id^='slot']",containment: ".gun",revert: true,revertDuration: 0})}	
		
		$("[id^='slot']").droppable({
			accept:"[id^='slot']",
			drop:function(){
				var newClass = $(this).attr("class").slice(0,4);
				var newID = $(this).attr("id");
				if(thisClass.slice(0,1) == newClass.slice(0,1)){
					$("#"+newID).attr("class",thisClass);
					$("#"+thisID).attr("class",newClass);
				}
			}
		});		
		$("#avatar").droppable({
			accept:"[id^='slot']",
			drop:function(){
				if(thisClass.slice(0,3) == "tx5"){
					$("#"+thisID).attr("class","tx10");
					heal("m1");
				}
			}
		});	
		$(".helper").html(addhelper($(this).attr("class").slice(2,4)))
	},function(){$(".helper").html("")})
/*==================================================================================================================================================*/
	function roll(idRoll){
		var vY = idRoll.split("y");
		var vX = idRoll.split("x");
		var vXX = vX[1].split("y");		
		return [[idRoll],
			   /*1	X-  */	[vX[0]+"x"+(+vXX[0]-1)+"y"+vXX[1]],			   
			   /*2	Y+  */	[vY[0]+"y"+(+vY[1]+1)],	
			   /*3	X+  */	[vX[0]+"x"+(+vXX[0]+1)+"y"+vXX[1]],
			   /*4	Y-  */	[vY[0]+"y"+(+vY[1]-1)],			  
			   /*5	X-Y-*/	[vX[0]+"x"+(+vXX[0]-1)+"y"+(+vY[1]-1)],
			   /*6	X+Y-*/	[vX[0]+"x"+(+vXX[0]+1)+"y"+(+vY[1]-1)],
			   /*7	X-Y+*/	[vX[0]+"x"+(+vXX[0]-1)+"y"+(+vY[1]+1)],
			   /*8	X+Y+*/	[vX[0]+"x"+(+vXX[0]+1)+"y"+(+vY[1]+1)]		
			   ]	
	}
/*==================================================================================================================================================*/
	function pos(p){
		if(p == "13" || p == "14" || p == "21" || p == "23" || p == "24" || p == "34" || p == "33" || p == "39"){return "1111"}		
		if(p == "10" || p == "15"){return "0011"}			if(p == "11" || p == "28"){return "1011"}		
		if(p == "12" || p == "16"){return "1001"}			if(p == "17" || p == "20"){return "0111"}			
		if(p == "25" || p == "30"){return "0110"}			if(p == "26" || p == "32"){return "1100"}		
		if(p == "27" || p == "31"){return "1110"}			if(p == "18" || p == "22"){return "1101"}	
		if(p == "19"){return "0101"}	if(p == "29"){return "1010"}	if(p == "37"){return "0100"}	
		if(p == "35"){return "0001"}	if(p == "36"){return "1000"}	if(p == "38"){return "0010"}
		
		if(p == "43" || p == "44" || p == "51" || p == "53" || p == "54" || p == "64" || p == "63" || p == "69"){return "1111"}		
		if(p == "40" || p == "45"){return "0011"}			if(p == "41" || p == "58"){return "1011"}		
		if(p == "42" || p == "46"){return "1001"}			if(p == "47" || p == "50"){return "0111"}			
		if(p == "55" || p == "60"){return "0110"}			if(p == "56" || p == "62"){return "1100"}		
		if(p == "57" || p == "61"){return "1110"}			if(p == "48" || p == "52"){return "1101"}	
		if(p == "49"){return "0101"}	if(p == "59"){return "1010"}	if(p == "67"){return "0100"}	
		if(p == "65"){return "0001"}	if(p == "66"){return "1000"}	if(p == "68"){return "0010"}
		
		if(p == "73" || p == "74" || p == "81" || p == "83" || p == "84" || p == "94" || p == "93" || p == "99"){return "1111"}		
		if(p == "70" || p == "75"){return "0011"}			if(p == "71" || p == "88"){return "1011"}		
		if(p == "72" || p == "76"){return "1001"}			if(p == "77" || p == "80"){return "0111"}			
		if(p == "85" || p == "90"){return "0110"}			if(p == "86" || p == "92"){return "1100"}		
		if(p == "87" || p == "91"){return "1110"}			if(p == "78" || p == "82"){return "1101"}	
		if(p == "79"){return "0101"}	if(p == "89"){return "1010"}	if(p == "97"){return "0100"}	
		if(p == "95"){return "0001"}	if(p == "96"){return "1000"}	if(p == "98"){return "0010"}
	}
/*==================================================================================================================================================*/
	function newDay(){
		message("Новый день!<br>[Ассортимент магазинов, противники и сундуки обновлены]","gВремя");sound("bell");
		if($("choice").attr("choice")=="easy" || $("choice").attr("choice")=="medium"){heal("p1"); addMoney(10,10)}
		if($("choice").attr("choice")=="hard"){var hard = random(10,30)}else{var hard = 0};
		for(var l=1; l<7; l++){$("label[for='item1"+l+"']").attr({"class":"tx"+random(81,84)+" item1"+l, "price":random(15,20)})}
		for(var l=1; l<4; l++){
			var a = random(60,69);
			if(a==60 || a==65){var k = 10}
			if(a==61 || a==66){var k = 19}
			if(a==62 || a==67){var k = 27}
			if(a==63 || a==68){var k = 35}
			if(a==64 || a==69){var k = 42}
			$("label[for='item2"+l+"']").attr({"class":"tx"+a+" item2"+l, "price":k+hard})
		}
		for(var l=1; l<4; l++){$("label[for='item3"+l+"']").attr({"class":"tx"+random(50,57)+" item3"+l, "price":random(15,25)+hard})}
	}
	function timer(){if($(".ap53").css("display") == "none"){return "200"}else{return "100"}}
	function p30time(){
			var time = $(".time").text().slice(0,-2)*60+ +$(".time").text().slice(-2);
			if(+time+10 < 1440){
				if(Math.floor(+time/60+0.2) > Math.floor(+time/60)){
					var hour = Math.floor(+time/60)+1;
				}else{var hour = Math.floor(+time/60);}				
				var min = (+time+10)/10%6+"0";
			}else{var hour = 0;var min = "00";}
			if(hour < 10){var nHour = "0"+hour}else{var nHour = hour}
			$(".time").html(nHour+"<br>"+min);
			if(nHour=="00" && min=="00"){
				newDay(); chestSpawn();
				var elength = enemy.length + enemyHard.length;
				for(var e=1; e<elength; e++){
					var enemyID = "#"+$("#enemy"+e+" div").attr("id");
					if(enemyID.slice(0,2)=="#f" && $(enemyID).parent().attr("class").slice(2,3)=="2"){
						var enemyClass = $(enemyID).parent().attr("class");
						$(enemyID).parent().attr({"id":"", "step":"", "class":"tx10"+enemyClass.slice(4)});
					}
				}enemySpawn();
			}else{enemyMove();}
			if(nHour+min == "2200" || nHour+min == "0600"){
				var id = "#"+$("gamer").parent().attr("id");
				if(+dayNight(id)[0] > 340 && +dayNight(id)[0] < 1310){$("#f5s2x7y3").parent().attr("class","tx10");}
					else{
						$("#f5s2x7y3").parent().attr("class","tx79 tx99");
						if($("#f5s2x7y3").attr("class").slice(-5) == "light"){$("#f5s2x7y3").parent().removeClass("tx99");}
					}
			}
//			if(nHour > 17){$(".stepTime").css("filter","hue-rotate(-"+(nHour-18)*20+"deg)")}
//			if(nHour > 5 && nHour < 10){$(".stepTime").css("filter","hue-rotate(-"+((9-nHour)*30)+"deg)")}
	}	
	function steps(n){		
		if(n==null){var n = 1}
		for(var s = 0; s < n; s++){
				var ap50 = $(".ap50").html().slice(15);
				var ap53 = $(".ap53").html().slice(19);
			
				if(ap53 > 1){
					$(".ap53").html($(".ap53").html().slice(0,19)+(+ap53-1));
					$(".content").css("box-shadow","inset 0 35vh 35vh -40vh #37aaa5");
				}else{$(".ap53").hide().html($(".ap53").html().slice(0,19)+"0"); $(".content").css("box-shadow","inset 0 30vh 35vh -40vh #37aaa5");
				if(ap50 > 1){$(".ap50").html($(".ap50").html().slice(0,15)+(+ap50-1))}else{$(".ap50").hide().html($(".ap50").html().slice(0,15)+"0")}}
				if(ap53==0 && ap50==0){$(".potion").attr("style","transform:translateY(-48px)")}
					else{$(".potion").attr("style","transform:translateY(0px)")}
			if($(".ap53").css("display") == "none"){setTimeout(function(){p30time();},+timer()+50)}
		}
		
		if($(".ap53").css("display") == "none"){
			var step = $(".step").html();
			$(".step").html(+step+1);
		}	
		$(".waitScroll").css({"transition":"0s","height":"0px"}).attr("wait","1");
		setTimeout(function(){$(".waitScroll").css({"transition":"."+timer()+"s linear","height":"195px"});},50);
		setTimeout(function(){$(".waitScroll").attr("wait","0");},+timer()+50)
	}
	$("#avatarWait").on("click",function(){
		if($(".money").html()!="0" || $(".choice").attr("choice")!="hard"){
			if($(".waitScroll").attr("wait") == "0"){
				var myID = "#"+$("gamer").parent().attr("id");
				move(myID, myID, 0, 0);
			 	if($(".choice").attr("choice")=="hard"){addMoney(-1,-1);}			
			}
		}else{message("Недостаточно средств","rОжидание")}
	})
/*==================================================================================================================================================*/
	function ship(id){
		if(+dayNight(id)[0] > 340 && +dayNight(id)[0] < 1310){				
			$("#f5s5x6y6").attr("class","wl46"+$("#f5s5x6y6").attr("class").slice(4));
			$("#f5s5x6y7").parent().parent().attr("class","bg25");			
		}else{
			$("#f5s5x6y6").attr("class","wl66"+$("#f5s5x6y6").attr("class").slice(4));
			$("#f5s5x6y7").parent().parent().attr("class","bg21");			
		}
	}
	function shipMove(n){
		var myID = "#"+$("gamer").parent().attr("id");
		if(myID=="#f5s5x6y7"){var idNew = "#f5s2x4y8"; var deg = -90} // Пляж -> Город
		if(myID=="#f5s2x4y7"){var idNew = "#f5s5x6y6"; var deg = 90} // Город -> Пляж
		if(myID=="#f5s2x6y6"){var idNew = "#f6s4x6y6"; var deg = 0} //Таверна
		if(myID=="#f5s2x7y9"){var idNew = "#f7s4x6y6"; var deg = 0}	//Церковь
		$(".loading").attr("style","z-index:100; background:#170A02");			
		setTimeout(function(){move(idNew, myID, 0, deg);},100);
		$(".cube"+myID.slice(2,3)).attr("class","ndis cube"+myID.slice(2,3));
		$(".cube"+idNew.slice(2,3)).attr("class","cube"+idNew.slice(2,3));		
		removeMoney(n,n);
		setTimeout(function(){$(".loading").attr("style","z-index:-1; background:rgba(0,0,0,0)");},300)
	}
/*==================================================================================================================================================*/
	function dayNight(myID){
		var hour = $(".time").html().slice(0,2);
		var min = $(".time").html().slice(-2);
		var time = +hour*60+ +min;
		if( myID.slice(2,3)=="5"){
			if(+time > 340 && +time < 1310){return [[time],[1]]}else{return [[time],[0]]}
		}else{return [[time],[0]]}
	}
/*==================================================================================================================================================*/
	function memory(idNew){
		var memory = +$(".step").html();
		if(idNew.slice(2,3)!="5" && idNew.slice(2,3)!="6" && idNew.slice(2,3)!="7" && idNew.slice(2,3)!="8"){
			$(idNew).attr("memory", memory);
		}		
	}
/*==================================================================================================================================================*/
	function mS(s){return $("#slot"+s).attr("class").slice(2,4);}
	function lightON(id){
		if(mS(1)!="13" && mS(2)!="13" && mS(3)!="13" && $(".ap50").html().slice(15)=="0" && +dayNight(id)[1]==0){torchOFF(id);}else{torchON(id);}
	}
	function move(idNew, id, mX, mY){
		var newClass = $(idNew).parent().attr("class").slice(2,4);	
		if(id.slice(2,3)!="8" && idNew.slice(2,3)!="8"){
		if($(".waitScroll").attr("wait")=="0" && newClass.slice(0,1)!="3" && newClass!="79" && newClass!="78" && $(".shopBG").attr("style").slice(9,10)!="1" && $("#backpack").css("left")=="-134px" && $("#avatar div").attr("class").slice(2,4)>70){
			steps(); lightON(idNew);
			setTimeout(function(){rotateCube(mX,mY);},50);
			$(id).html(""); $(idNew).html("<gamer></gamer>").parent().parent().removeClass("o0");
			if($(idNew).parent().parent().parent().parent().attr("class").slice(-2)=="e6" || $(idNew).parent().parent().parent().parent().attr("class").slice(-2)=="e8"){
				$("gamer").attr("style", "background: url('img/H.png')")
			}
			if($(idNew).parent().attr("class").slice(2,3)=="2" && $(idNew).parent().attr("class").slice(2,4)!="20"){
				heal("m1");
				$(idNew).parent().attr("class","tx10");
				addMoney(10,14);
				questKill(3);		
				var endenemy = $(".endenemy").html().slice(18);
				$(".endenemy").html("Повержено врагов: "+(+endenemy+1));
			}
			if(+dayNight(idNew)[0] > 340 && +dayNight(idNew)[0] < 1310){
				$("[id^='f5']").parent().removeClass("tx99 light minlight ds0 ds33").addClass("tx98");				
			}else{$("[id^='f5']").parent().addClass("tx99 ds33").removeClass("tx98 light minlight");}
				
			$("[id^='f4'] , [id^='f3'] , [id^='f2'] , [id^='f1']").parent().removeClass("light minlight ds33").addClass("tx99 ds0");	
			$("[id^='f6'] , [id^='f7'] , [id^='f8']").parent().removeClass("light minlight ds33");
			$("[id^='f6']").removeClass("light minlight");	
			setTimeout(function(){
				if(mS(1)!="13" && mS(2)!="13" && mS(3)!="13" && $(".ap50").html().slice(15)=="0"){
					$(idNew).parent().addClass("minlight").removeClass("tx99");
					if(idNew.slice(2,3)=="5"){
						if(+dayNight(idNew)[0] > 340 && +dayNight(idNew)[0] < 1310){$(idNew).parent().addClass("light").removeClass("tx98 minlight ds33")}
					}
				}else{
					$(idNew).parent().addClass("light").removeClass("tx99 tx98 ds33 ds0");
					if(idNew.slice(2,3)=="5"){
						$(idNew).parent().addClass("ds33");
						if(+dayNight(idNew)[0] > 340 && +dayNight(idNew)[0] < 1310){$(idNew).parent().addClass("light").removeClass("tx99 minlight ds33")}
					}
				}				
			},50);
			ship(idNew); memory(idNew);
			rotateCube(+$(".cube1 , .cube2 , .cube3 , .cube4 , .cube5").attr("rX")*-1,+$(".cube1 , .cube2 , .cube3 , .cube4 , .cube5").attr("rY")*-1);
			for(var c=1;c<6;c++){$(".cube"+c).attr({"rX":"0","rY":"0"});}
		}
		}
	}
/*==================================================================================================================================================*/
	function rotateCube(x,y){
		for(var c = 1; c<6; c++){
			var cDeg = $(".cube"+c).attr("style").split("deg");
			$(".cube"+c).attr("style", "transform: rotateX("+(+cDeg[0].slice(19)+x)+"deg) rotateY("+(+cDeg[1].slice(10)+y)+"deg)");	
		}
	}
/*==================================================================================================================================================
	function g0(){$("gamer").attr("style", "transform: scaleX(1)");}
	function g90(){$("gamer").attr("style", "transform: scaleX(-1)");}
	function g180(){$("gamer").attr("style", "transform: scaleX(1)");}
	function g270(){$("gamer").attr("style", "transform: scaleX(1)");}
/*==================================================================================================================================================*/	
	function sorting(shift, id){
		if($(id).parent().attr("class")=="shop"){var id = false}		
		if(shift.slice(0,3) == "tx4" || shift.slice(0,3) == "tx5" || shift.slice(0,3) == "tx6" || shift.slice(0,4) == "tx12" || shift.slice(0,4) == "tx13" || shift.slice(0,4) == "tx11" || shift.slice(0,4) == "tx18" || shift.slice(0,4) == "tx80" || shift.slice(0,4) == "tx77" || shift.slice(0,4) == "tx76" || shift.slice(0,4) == "tx97"){
			var eClass = $("gamer").parent().parent().attr("class").slice(4);
			function dd(n){return $("#slot"+n).attr("class").slice(0,4)};
			if(dd(1)=="tx10"){$("#slot1").attr("class",shift); $(id).parent().attr("class","tx10"+eClass)}
			else{if(dd(2)=="tx10"){$("#slot2").attr("class",shift); $(id).parent().attr("class","tx10"+eClass)}
				else{if(dd(3)=="tx10"){$("#slot3").attr("class",shift); $(id).parent().attr("class","tx10"+eClass)}
					else{if($("#backpack").attr("there") == "1"){
						if(dd(4)=="tx10"){$("#slot4").attr("class",shift); $(id).parent().attr("class","tx10"+eClass)}
						else{if(dd(5)=="tx10"){$("#slot5").attr("class",shift); $(id).parent().attr("class","tx10"+eClass)}
							else{if(dd(6)=="tx10"){$("#slot6").attr("class",shift); $(id).parent().attr("class","tx10"+eClass)}
								else{if(dd(7)=="tx10"){$("#slot7").attr("class",shift); $(id).parent().attr("class","tx10"+eClass)}
									else{if(dd(8)=="tx10"){$("#slot8").attr("class",shift); $(id).parent().attr("class","tx10"+eClass)}
										else{if(dd(9)=="tx10"){$("#slot9").attr("class",shift); $(id).parent().attr("class","tx10"+eClass)}
											else{message("Не хватает места","rИнвентарь")}}}}}}
						}else{message("Не хватает места","rИнвентарь")}}}}		
		}	
	}
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
	function start(){
		$(".waitScroll").attr("wait", "1");
		$(".start").attr("style", "z-index:100");
		setTimeout(function(){$(".start").css("background", "#fff"); $(".waitScroll").attr("wait", "1");},500);
		setTimeout(function(){
			teleport("#f7s4x6y6");
			$("#backpack [id^='slot']").attr("class", "tx10");
			$("#avatar div").attr("class", "tx74");
		},3500);
		setTimeout(function(){
			$(".start").css({"background":"rgba(255,255,255,0)", "z-index":"-1"});
			$(".waitScroll").attr("wait", "0");
		},4000);
	}
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
	




	function take(id){
		var shift = $(id).parent().attr("class").slice(0,4);			
		var idPos = $(id).attr("id").slice(5).split("y");
		var maze = $(id).attr("id").slice(0,4);
		var idX = idPos[0];
		var idY = idPos[1];
		var eClass = $("gamer").parent().parent().attr("class").slice(4);
		if($(".waitScroll").attr("wait")=="0" && +$("#avatar div").attr("class").slice(2,4)>70){
			if(shift == "tx14"){mesShop(id);}		
			if(shift == "tx15"){message('Соединимся на 8 часов?','Кровать','18','sleep(48);');}
			if(shift == "tx16"){
				if(id == "#f5s2x4y7" || id == "#f5s5x6y7"){
					if(+$(".money").html()>9){
							message('Ну что, поплыли на другой конец берега за символическую плату в 10 золотых?','Рыбак','75','shipMove(10);');			
					}else{message("Не хватает золота","rОшибка")}
				}
				if(id == "#f5s2x7y5"){teleport("#f7s4x6y2")}
				if(id == "#f7s4x6y2"){teleport("#f5s2x7y5")}
				if(id == "#f6s4x6y2"){message("Сначала приготовьте поесть", "rГолод")}
				if(id == "#f6s4x6y6"){
					if(mS(1)=="10" || mS(2)=="10" || mS(3)=="10"){message("Недостаточно ингредиентов", "rГолод")}
					else{message('Начать готовку?','Голод','80','start();');}
				}
			}
			if(shift == "tx17"){message('Открыть сундук?','Внутренний голос','75','openChest()');}	
			if(shift == "tx19"){
				message('Сумка! Теперь появилось дополнительное место!','Голос подземелья','75');
				$(id).parent().attr("class","tx10"+eClass);
				$("#backpack").attr("there","1");
			}	
			if(shift.slice(2,4) == "91" || shift.slice(2,4) == "92" || shift.slice(2,4) == "93" || shift.slice(2,4) == "94" || shift.slice(2,4) == "95"){
				var MYf = id.slice(2,3);
				var NEWf = $(id).parent().attr("class").slice(3,4);
				var idMaze = maze.slice(-1);
				var idNew = "#f"+NEWf+"s"+idMaze+"x"+idX+"y"+idY;
				$(".waitScroll").attr("wait","1");
				setTimeout(function(){
					$(".waitScroll").attr("wait","0");
					move(idNew, id, 0, 0);
					$(".cube"+NEWf).attr("class","cube"+NEWf);	
					$(".cube"+MYf).attr("class","ndis cube"+MYf);				
				},100)
			}
			sorting(shift, id);
		}
	}			




/*==================================================================================================================================================*/
	function clickW(data){	
		if($("#backpack").attr("compass")=="0"){
			var myID = "#"+$("gamer").parent().attr("id");
			var dataID = "#"+$(data).attr("id");
			if(myID.slice(2,3)=="5" && +dayNight(myID)[1]=="1"){var testLight = " light"}else{
				if(mS(1)!="13" && mS(2)!="13" && mS(3)!="13" && $(".ap50").html().slice(15)=="0"){var testLight = "nlight"}else{var testLight = " light";}
			}
			if($(data).parent().attr("class").slice(-6) == testLight && dataID != myID){move(dataID, myID, 0, 0)}	
			if($("gamer").parent().parent().attr("class").slice(0,4) != "tx10" &&  myID == dataID){take(myID);}
		}
	}
/*==================================================================================================================================================*/
	function PP(a, b, id1, id2, id3, id4, id5){$(id1+","+id2+","+id3+","+id4+","+id5).parent().parent().removeClass(a).addClass(b);};	
	function v1(id){
		var idSlice = $(id).parent().parent().attr("class").slice(0,4);
		if(idSlice == "bg46"){PP("bg46", "bg45",id);}
		if(idSlice == "bg45"){PP("bg45", "bg44",id);}
		if(idSlice == "bg44"){PP("bg44", "bg43",id);}
		if(idSlice == "bg43"){PP("bg43", "bg42",id);}
		if(idSlice == "bg42"){PP("bg42", "bg46",id);}
	}
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
	function mesShop(id){
		if(id=="#f5s2x6y6"){message('Есть несколько заказов для тебя, интересует?','Владелец таверны','75','openShop(1)');}
		if(id=="#f5s2x7y9" || id=="#f4s2x5y5" || id=="#f3s5x3y7"){message('Лучшие луки и мечи во всем королевстве!','Кузнец','75','openShop(2)');}
		if(id=="#f5s3x3y7" || id=="#f1s2x5y6"){message('Хлебнуть моей стрепни не желаешь?','Ведьма','75','openShop(3)');}
		if(id=="#f5s2x9y5" || id=="#f4s2x5y8" || id=="#f3s6x5y7" || id=="#f4s5x9y8"){
			if($("#avatar div").attr("class").slice(-2)!="74"){message('Неважно выглядишь, могу помочь тебе, но не за просто так','Священник','75','openShop(4)');}
				else{message('Что тебе нужно, странник?','Священник','75','openShop(4)');}
		}
	}
	function openShop(n){
		$(".shopBG").css({"z-index":"1","background":"rgba(0,0,0,.5)","opacity":"1"}).attr("shop",n); 
		$("#shop"+n).removeClass("ndis");
	}
/*==================================================================================================================================================*/
	$(".shopBG input[name^='bI']").on("click",function(){
		var n = $(".shopBG").attr("shop"); var price = 0;
		if($("#shop1 :checked[name='bI"+n+"'] , #shop4 :checked[name='bI"+n+"']").length>1){
			$("input[id^='item"+n+"']").prop('checked', false);
			$(this).prop('checked', true);
		}
		for(var p = 1; p<10;p++){if($("#item"+n+p).prop('checked') == true ){ var price = +price+ +$("label[for='item"+n+p+"']").attr("price");}}
		if($(".shopBG :checked[name='bI"+n+"']").length>0){$("#shop"+n+" .plusButton").removeClass("ndis").html("купить ("+price+")");}
			else{$("#shop"+n+" .plusButton").addClass("ndis").html("купить")}
	})
	function ss(n){return $("#slot"+n).attr("class").slice(2,4)}	
	$(".shopBG .minusButton").on("click",function(){
		$("#shop"+$(".shopBG").attr("shop")).addClass("ndis");
		$(".shopBG").css({"z-index":"-1","background":"rgba(0,0,0,0)","opacity":"0"}).attr("shop","0");
	})	
	$(".shopBG .plusButton").on("click",function(){		
		var bp = 0; var it = 0; var n = $(".shopBG").attr("shop"); var price = 0;
		for(var p = 1; p<10;p++){if($("#item"+n+p).prop('checked') == true){var price = +price+ +$("label[for='item"+n+p+"']").attr("price"); it++}; if(ss(p)=="10"){bp++}}
		if(+price <= $(".money").html()){
			if($("#shop1").attr("class").slice(-4) == "ndis" && $("#shop4").attr("class").slice(-4) == "ndis"){
				if(+bp >= +it && +bp!=0){
					for(var a = 1;a < 10;a++){
						if($("#item"+n+a).prop('checked') == true){	
							var item = $(".item"+n+a).attr("class").slice(0,4);
							var slot = $(".item"+n+a).attr("class").slice(4);
							var price = $("label[for='item"+n+a+"']").attr("price");
							$(".item"+n+a).attr("class", "tx10"+slot).attr("price","0");
							$("input[id='item"+n+a+"']").prop('checked', false);
							$(".plusButton").addClass("ndis");
							$(".money").html($(".money").html()-price);
							sorting(item,".shopBG .item"+n+a);
						}
					}	
				}else{message("Столько не унести","rОшибка")}
			}else{
				if($("#shop1").attr("class").slice(-4) != "ndis"){
					if($(".meslog").attr("quest") == "0"){
						for(var a = 1;a < 10;a++){
							if($("#item"+n+a).prop('checked') == true){	
								var item = $(".item"+n+a).attr("class").slice(0,4);
								var slot = $(".item"+n+a).attr("class").slice(4);
								var price = $("label[for='item"+n+a+"']").attr("price");									
								$(".item"+n+a).attr("class", "tx10"+slot).attr("price","0");
								$("input[id='item"+n+a+"']").prop('checked', false);
								$(".plusButton").addClass("ndis");
								$(".money").html($(".money").html()-price);
								newQuest(item.slice(-1));
							}
						}		
					}else{message("У вас уже есть задание. Завершите его или откажитесь","rОшибка")}
				}else{
					if($("#avatar div").attr("class")!="tx74"){
						for(var a = 1;a < 4;a++){
							if($("#item"+n+a).prop('checked') == true){	
								var price = $("label[for='item"+n+a+"']").attr("price");
								$(".money").html($(".money").html()-price);						
								heal("p"+a);
							}
						}
					}else{message("Лечение не требуется","gЗдоровье");}
					$("input[id^='item"+n+"']").prop('checked', false);
					$(".plusButton").addClass("ndis");		
				}
			}
		}else{message("Нужно больше золота","rОшибка")}
	})
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/	
	function torchOFF(idOFF){
		var tOFFarr = [1,4,3,2];
		for(let a = 0; a < 4; a++){
			if(pos($(idOFF).attr("class").slice(2,4)).slice(a , +a+1) == 1){
				setTimeout(function(){$(roll(idOFF)[tOFFarr[a]][0]).parent().addClass("minlight").removeClass("tx99 tx98")},50);
				$(roll(idOFF)[tOFFarr[a]][0]).parent().parent().removeClass("o0");
				memory(roll(idOFF)[tOFFarr[a]][0]);
			} 
		}	
	}
/*==================================================================================================================================================*/
	function torchON(idON){
		var tONarr = [1,4,3,2];
		for(let a = 0; a < 4; a++){
			if(pos($(idON).attr("class").slice(2,4)).slice(a , +a+1) == 1){
				setTimeout(function(){
					$(roll(idON)[tONarr[a]][0]).parent().addClass("light").removeClass("tx99 tx98 ds0 ds33");
					if(idON.slice(2,3)=="5" && +dayNight(idON)[1]==0){$(roll(idON)[tONarr[a]][0]).parent().addClass("ds33")}
					memory(roll(idON)[tONarr[a]][0]);
				},50);
				$(roll(idON)[tONarr[a]][0]).parent().parent().removeClass("o0");
				if($(roll(idON)[tONarr[a]][0]).attr("class") != null){
					if(pos($(roll(idON)[tONarr[a]][0]).attr("class").slice(2,4)).slice(a,+a+1)==1 && $(roll(idON)[tONarr[a]][0]).parent().attr("class").slice(0,3)!="tx3" && $(roll(idON)[tONarr[a]][0]).parent().attr("class").slice(0,4)!="tx79"){
						$(roll(roll(idON)[tONarr[a]][0])[tONarr[a]][0]).parent().parent().removeClass("o0");
						setTimeout(function(){
							$(roll(roll(idON)[tONarr[a]][0])[tONarr[a]][0]).parent().addClass("minlight").removeClass("tx99 tx98 ds0")
							if(idON.slice(2,3)!="5"){$(roll(roll(idON)[tONarr[a]][0])[tONarr[a]][0]).parent().addClass("ds33")}
							memory(roll(roll(idON)[tONarr[a]][0])[tONarr[a]][0])
						},50)
					}
				}
			}
		}
	}			
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
	function sleep(n){
		var myID = "#"+$("gamer").parent().attr("id");
		setTimeout(function(){if($(".dead").css("opacity") == "0"){
			$(".loading").attr("style","z-index:80; background:#170A02").html("Сон...<br>[время: +"+n/6+"ч.]");
		}},100);
		$(".waitScroll").attr("wait","1");
		setTimeout(function(){$(".waitScroll").attr("wait","1");}, +timer()+60);
		setTimeout(function(){
			steps(n-2); 
			if($("#avatar div").attr("class")!="tx90"){
				heal("p1");
				if($("choice").attr("choice")!="hard"){$("#avatar div").attr("class","tx74")}
			}		
			$(".waitScroll").attr("wait","0");					
		},1000);
		setTimeout(function(){
			setTimeout(function(){move(myID, myID, 0, 0)},50) 
			$(".loading").attr("style","z-index:-1; background:rgba(0,0,0,0)").html("");
		},1450)
	}
/*==================================================================================================================================================*/
/*===================we===============================================================================================================================*/
	function teleport(idNew){
		if($(".shopBG").attr("style").slice(9,10)!="1" && $("#avatar div").attr("class").slice(2,4) > 70){
			$(".loading").attr("style","z-index:100; background:#170A02");
			var myID = "#"+$("gamer").parent().attr("id");
			var c = idNew.slice(2,3);
			if(idNew == "#f7s4x2y2"){
				if(myID.slice(4,5)=="1"){move(idNew, myID, 0, 0); setTimeout(function(){rotateCube(90,180)},100);}	
				if(myID.slice(4,5)=="2"){move(idNew, myID, 0, 0); setTimeout(function(){rotateCube(0,0)},100);}
				if(myID.slice(4,5)=="3"){move(idNew, myID, 0, 0); setTimeout(function(){rotateCube(0,90)},100);}		
				if(myID.slice(4,5)=="4"){move(idNew, myID, 0, 0); setTimeout(function(){rotateCube(0,180)},100);}	
				if(myID.slice(4,5)=="5"){move(idNew, myID, 0, 0); setTimeout(function(){rotateCube(0,-90)},100);}
				if(myID.slice(4,5)=="6"){move(idNew, myID, 0, 0); setTimeout(function(){rotateCube(-90,180)},100);}		
			}else{move(idNew, myID, 0, 0);}
			setTimeout(function(){	
				if(+dayNight(idNew)[1]==0){$("[id^='f5']").parent().removeClass("light minlight").addClass("tx99");}
					else{$("[id^='f5']").parent().removeClass("light minlight").addClass("tx98");}
				var floor = $(myID).attr("id").slice(1,2);
				$(".cube"+floor).attr("class","ndis cube"+floor);
				$(".cube"+c).attr("class","cube"+c);	
				setTimeout(function(){
					$(idNew).html("<gamer></gamer>").parent().addClass("light").removeClass("tx99 tx98").parent().removeClass("o0");
					if($(idNew).parent().parent().parent().parent().attr("class").slice(-5) == "cube6" || $(idNew).parent().parent().parent().parent().attr("class").slice(-5) == "cube8"){
						$("gamer").attr("style", "background: url('img/H.png')")
					}
					$(".loading").attr("style","z-index:-1; background:rgba(0,0,0,0)");
					$(myID).html("").parent().removeClass("light minlight")
					},50);
				lightON(idNew);
			},200)
		}	
	}
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/	
	function dblclick(slot){
		var myID = "#"+$("gamer").parent().attr("id");	
		if($(".shopBG").attr("style").slice(9,10)!="1" && $(".waitScroll").attr("wait")=="0" && $("#avatar div").attr("class").slice(2,4) > 70){
			caseCompass(myID, slot);
			if($("#backpack").attr("compass")=="0"){
				caseTorch(myID, slot);
				casePotion(myID, slot);
				caseKey(myID, slot);
				caseSword(myID, slot);
				caseBow(myID, slot);
				caseHammer(myID, slot);
			}
		}
	}	
	function caseCompass(myID, slot){	
		if($(slot).attr("class").slice(0,4)=="tx11"){
			if($("#backpack").attr("compass")=="0"){$("#backpack").attr("compass","1")}else{$("#backpack").attr("compass","0")}
			move(myID, myID, 0, 0);
			$(".c2f").css({"transform":"scale(.98)","transition":".1s"});
			setTimeout(function(){$(".c2f").css({"transform":"scale(1)","transition":".1s"});},200)			
		}
	}
	function caseTorch(myID, slot){	
		if($(slot).attr("class").slice(0,4)=="tx12"){
			$(slot).removeClass("tx12 , ui-draggable , ui-draggable-handle , ui-droppable").addClass("tx13");					
			move(myID, myID, 0, 0);
		}else{
			if($(slot).attr("class").slice(0,4)=="tx13"){
				$(slot).removeClass("tx13 , ui-draggable , ui-draggable-handle , ui-droppable").addClass("tx12"); move(myID, myID, 0, 0);
			}			
		}
	}
	function casePotion(myID, slot){	
		if($(slot).attr("class").slice(0,3)=="tx5" && $(slot).attr("class").slice(0,4)!="tx59"){	
			steps();
			var hp = $("#avatar div").attr("class");
			var potion = $(slot).attr("class").slice(2,4);
				if(potion=="50"){
					var html015 = $(".ap50").html().slice(0,15);
					var html15 = $(".ap50").html().slice(15);
					$(".ap50").html(html015+(+html15+50)).attr("style","display");
					$(".potion").attr("style","transform:translateY(0px)");
				}
				if(potion=="51"){
					var p51 = 0;
					for(var p = 1; p < 10; p++){
						if($("#slot"+p).attr("class").slice(2,3) == "6" && $("#slot"+p).attr("class").slice(2,4) != "64" && $("#slot"+p).attr("class").slice(2,4) != "69"){
							var gun = $("#slot"+p).attr("class").slice(2,4);
							$("#slot"+p).attr("class","tx"+(+gun+1));
						}else{p51++;}
					}
				}
				if(potion=="52"){addMoney(15,20)}
				if(potion=="53"){
					var html019 = $(".ap53").html().slice(0,19);
					var html19 = $(".ap53").html().slice(19);
					$(".ap53").html(html019+(+html19+50)).attr("style","display");
					$(".content").css("box-shadow","inset 0 35vh 35vh -40vh #37aaa5");
					$(".potion").attr("style","transform:translateY(0px)");
				}
				if(potion=="54"){teleport("#f7s4x2y2");}
				if(potion=="55"){sleep(48)}
				if(potion=="56"){
					var p56 = random(1,10);
					if(p56==1 || p56==2 || p56==3){addMoney(5,25)}
					if(p56==4){heal("p2")}
					if(p56==5){heal("p1")}
					if(p56==6 || p56==7 || p56==8 || p56==9){heal("m1")}
					if(p56==10){heal("m2")}
				}
				if(potion=="57"){heal("p2")}		
				if(potion=="58"){
					teleport("#f8s4x6y6");
					var man = ["#f8s4x6y2", "#f8s4x5y2", "#f8s4x4y2", "#f8s4x4y3", "#f8s4x4y4"];
					setTimeout(function(){$(man[0]).html("<man></man>");},1000)
					setTimeout(function(){$(man[1]).html("<man></man>");$(man[0]).html("");},1500)
					setTimeout(function(){$(man[2]).html("<man></man>");$(man[1]).html("");},2000)
					setTimeout(function(){$(man[3]).html("<man></man>");$(man[2]).html("");},2500)
					setTimeout(function(){$(man[4]).html("<man></man>");$(man[3]).html("");},3000)
					setTimeout(function(){message("Что здесь произошло?","Он","96")},3200)
					setTimeout(function(){$(".end").css({"z-index":100, "background":"#fff"})},4000)
					setTimeout(function(){
						$(".end div").css({"opacity":1});
						$(".endstep").html("Количество ходов: " + $(".step").html())
						if($(".choice").attr("choice")=="easy"){$(".endmap").html("Карта открыта на: 100%")}
							else{
								var m = 720;
								for(var f=1; f<5; f++){
									for(var s=1; s<7; s++){
										for(var x=(6-f); x<(6+f); x++){
											for(var y=(6-f); y<(6+f); y++){
												if($("#f"+f+"s"+s+"x"+x+"y"+y).parent().parent().attr("class").slice(-2) == "o0"){m--}
											}
										}
									}
								}
								var res = m*100/720;
								$(".endmap").html("Карта открыта на: "+res.toFixed(2)+"%")
							}					
					},8000)
				}
			if($(slot).attr("class").slice(2,4)!="57" && p51!=9){$(slot).attr("class","tx10")}
				else{if(hp!="tx74"){$(slot).attr("class","tx10")}}
		}
	}
	function potionRemove(ap){
		var html = $(".ap"+ap).html().split(":");
		$(".ap"+ap).css("display","none").html(html[0]+": 0");
		if(+ap==53){$(".content").css("box-shadow","inset 0 30vh 35vh -40vh #37aaa5")}
		if($(".ap5"+(53-ap)).html().slice(-1)=="0"){$(".potion").attr("style","transform:translateY(-48px)");}
		var myID = "#"+$("gamer").parent().attr("id");
		lightON(myID); steps(1);
	}
	$(".potion div").on("click",function(){message('Обнулить эффект этого зелья?','Зелье',$(this).attr("class").slice(-2) ,'potionRemove('+$(this).attr("class").slice(-2)+')');})
	function caseKey(myID, slot){
		if($(slot).attr("class").slice(0,3)=="tx4"){
			var key = $(slot).attr("class").slice(2,4);			
			var doorPos = [1,4,3,2];
			for(let a = 0; a < 4; a++){
				if(pos($(myID).attr("class").slice(2,4)).slice(a , +a+1) == 1){
					var door = $(roll(myID)[doorPos[a]][0]).parent().attr("class").slice(2,4);
					if(door.slice(0,1)=="3"){			
						if( +door.slice(1) == +key.slice(1) ){
							$(roll(myID)[doorPos[a]][0]).parent().attr("class", "tx10");
							message("Дверь отворена","gКлюч"); 
							steps();
							$(slot).attr("class", "tx10");
						}
					}	
				} 
			}
		}
	}
	function caseSword(myID, slot){
		if($(slot).attr("class").slice(2,4)=="60" || $(slot).attr("class").slice(2,4)=="61" || $(slot).attr("class").slice(2,4)=="62" || $(slot).attr("class").slice(2,4)=="63" || $(slot).attr("class").slice(2,4)=="64"){
			var sword = $(slot).attr("class").slice(2,4);
			var enemyPos = [1,4,3,2];
			var e = 0;
			for(let a = 0; a < 4; a++){
				if(pos($(myID).attr("class").slice(2,4)).slice(a , +a+1) == 1){
					if(+sword>59){
						var enemy = $(roll(myID)[enemyPos[a]][0]).parent().attr("class").slice(2,4);
						if(enemy.slice(0,1)=="2" && enemy!="20"){
							var tx = $(roll(myID)[enemyPos[a]][0]).parent().attr("class").slice(4);
							$(roll(myID)[enemyPos[a]][0]).parent().attr("class", "tx10"+tx);
							message("Враг повержен","gМеч"); 
							steps();
							addMoney(8,12);		
							questKill(2);
							var endenemy = $(".endenemy").html().slice(18);
							$(".endenemy").html("Повержено врагов: "+(+endenemy+1));
							var e = e + 1;
							if(+sword>60){$(slot).attr("class", "tx"+(+$(slot).attr("class").slice(2,4)-1));}
								else{$(slot).attr("class", "tx10")}
						}
					}	
				} 
			}	
			if(+e==0){message("Поблизости противников не обнаружено","rОшибка")}else{sound("sword")}
		}
	}	
	function caseBow(myID, slot){
		if($(slot).attr("class").slice(2,4)=="65" || $(slot).attr("class").slice(2,4)=="66" || $(slot).attr("class").slice(2,4)=="67" || $(slot).attr("class").slice(2,4)=="68" || $(slot).attr("class").slice(2,4)=="69"){
			var bow = $(slot).attr("class").slice(2,4);			
			var enemyPos = [1,4,3,2];
			var e = 0;
			for(let a = 0; a < 4; a++){
				if(pos($(myID).attr("class").slice(2,4)).slice(a , +a+1) == 1){
					if(+bow>64){
						var enemy = $(roll(roll(myID)[enemyPos[a]][0])[enemyPos[a]][0]).parent().attr("class").slice(2,4)
						if(enemy.slice(0,1)=="2" && enemy!="20"){			
							$(roll(roll(myID)[enemyPos[a]][0])[enemyPos[a]][0]).parent().attr("class", "tx10 minlight");
							message("Враг повержен","gЛук"); 
							steps();
							addMoney(10,14);
							questKill(1);
							var endenemy = $(".endenemy").html().slice(18);
							$(".endenemy").html("Повержено врагов: "+(+endenemy+1));
							var e = e + 1;
							if(+bow>65){$(slot).attr("class", "tx"+(+$(slot).attr("class").slice(2,4)-1));}
								else{$(slot).attr("class", "tx10")}
						}
					}	
				} 
			}
			if(+e==0){message("Поблизости противников не обнаружено","rОшибка")}else{sound("bow")}
		}
	}
	function caseHammer(myID, slot){
		if($(slot).attr("class").slice(2,4)=="97"){
			var hammer = $(slot).attr("class").slice(2,4);
			var wallPos = [1,4,3,2];
			var e = 0;
			for(let a = 0; a < 4; a++){
				if(pos($(myID).attr("class").slice(2,4)).slice(a , +a+1) == 1){
					var wall = $(roll(myID)[wallPos[a]][0]).parent().attr("class").slice(2,4);
					if(wall=="78" && myID.slice(2,3)!="6" && myID.slice(2,3)!="7" && myID.slice(2,3)!="8" && myID.slice(2,3)!="5"){
						var tx = $(roll(myID)[wallPos[a]][0]).parent().attr("class").slice(4);
						$(roll(myID)[wallPos[a]][0]).parent().attr("class", "tx10"+tx);
						message("Стена разрушена","gМолот"); 
						steps();	
						var endhammer = $(".endhammer").html().slice(16,-2);
						$(".endhammer").html("Стен разрушено: "+(+endhammer+1)+"/9");
						var e = e + 1;
						if(myID=="#f4s4x6y7"){$(myID).attr("class","wl25"); $("#f4s4x6y6").attr("class","wl16")}
						if(myID=="#f4s3x6y4"){$(myID).attr("class","wl26"); $("#f4s3x6y3").attr("class","wl16")}
						if(myID=="#f4s3x8y4"){$(myID).attr("class","wl16"); $("#f4s3x8y5").attr("class","wl26")}
						if(myID=="#f4s4x4y9"){$(myID).attr("class","wl26"); $("#f4s4x4y8").attr("class","wl16")}
						if(myID=="#f3s4x7y7"){$(myID).attr("class","wl15"); $("#f3s4x7y8").attr("class","wl25")}
						if(myID=="#f3s3x8y8"){$(myID).attr("class","wl26"); $("#f3s3x8y7").attr("class","wl16")}
						if(myID=="#f3s2x4y5"){$(myID).attr("class","wl16"); $("#f3s2x4y6").attr("class","wl26")}
						if(myID=="#f2s6x4y4"){$(myID).attr("class","wl17"); $("#f2s6x5y4").attr("class","wl39")}
						if(myID=="#f2s3x7y6"){$(myID).attr("class","wl15"); $("#f2s3x6y6").attr("class","wl28")}
					}
				} 
			}	
			if(+e==0){message("Хрупких стен не обнаружено","rОшибка")}
		}
	}	
	$("#slot1, #slot2, #slot3").on("dblclick", function(){dblclick(this);})
	$("[id$='Use']").on("click",function(){
		if($("#"+$(this).attr('id').slice(0,-4)).attr("class") != "tx10"){
			var slot = "#"+$(this).attr('id').slice(0,5);
			dblclick(slot);
		}else{message("Нечего использовать","rОшибка")}
	});		
	$("[id$='Drop']").on("click",function(){
		if($(".shopBG").attr("style").slice(9,10)!="1" && $("gamer").parent().attr("id")!="f5s2x7y3"){
			if($("#"+$(this).attr('id').slice(0,-4)).attr("class") != "tx10"){
				if($("gamer").parent().parent().attr("class").slice(0,4) == "tx10"){		
					var Item = $("#"+$(this).attr('id').slice(0,-4)).attr("class").slice(0,4);
					var eClass = $("gamer").parent().parent().attr("class").slice(4);
					$("gamer").parent().parent().attr("class", Item+eClass);
					$("#"+$(this).attr('id').slice(0,-4)).attr("class","tx10");
				}else{message("Тут тесновато для двоих","rОшибка")}
			}else{message("Нечего выбрасывать","rОшибка")}
		}
	});	
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
	function newQuest(num){
		$(".meslog").attr({"quest":"1","questNum":num});
		if(num=="1"){var n = random(10,13); message("Уничтожить грибов с используя лук: " +n+"<br>Награда: +"+random(45,55),"qЗаказ №"+num, "8"+num,"0/"+n);}
		if(num=="2"){var n = random(8,11);  message("Уничтожить грибов с используя мечь: "+n+"<br>Награда: +"+random(40,50),"qЗаказ №"+num, "8"+num,"0/"+n);}
		if(num=="3"){var n = random(3,5);   message("Уничтожить грибов врукопашную: "     +n+"<br>Награда: +"+random(30,40),"qЗаказ №"+num, "8"+num,"0/"+n);}
		if(num=="4"){var n = random(3,5);   message("Найти и открыть сундуков: "+n+"<br>Награда: +"+random(30,40),"qЗаказ №"+num, "8"+num,"0/"+n);}
	}
/*==================================================================================================================================================*/
	function questKill(n){
		if($(".meslog").attr("quest")=="1" && $(".meslog").attr("questnum")==n){
			var qM = $(".meslog").attr("questmes");
			var task = $("#mes"+qM+" .mesQuest").html().split("/");
			$("#mes"+qM+" .mesQuest").html(+task[0]+1+"/"+task[1]);
			if(+task[0]+1 == +task[1]){
				var gold = $("#mes"+qM+" .mtext").html().slice(-2);
				if(random(1,3)=="2"){message("Заказ выполнен! Вы разаботали "+gold+" золота<br>Бонус: +50% жизненной силы","gУспех");heal("p2");}
					else{
						message("Заказ выполнен! Вы разаботали "+gold+" золота","gУспех");
						var endquest = $(".endquest").html().slice(19);
						$(".endquest").html("Заказов выполнено: "+(+endquest+1));
					}				
				addMoney(gold,gold); mesReport($("#mes"+qM+" div div"),3);
			}
		}
	}
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
	$(".openmes").on("click",function(){
		if( $("#mes1").attr("class").slice(-2) == "o0"){$(".mes").removeClass("o0");}
			else{$(".mes").addClass("o0");}
	})		
	function mesReport(id, v){
		id.parent().parent().attr({"accept":"0", "delete":"1"});
		var parent = "#"+id.parent().parent().attr("id");
		$(parent+" .mesAccept , "+parent+" .mesCancel , "+parent+" .mesQuest").addClass("ndis");
		if(v==0){$(parent+" .mesReport").html("Выбор: [Отмена]");}
		if(v==1){$(parent+" .mesReport").html("Выбор: [Действие]");}
		if(v==2){$(parent+" .mesReport").html("Выбор: [Отказ]"); $(".meslog").attr("quest","0")}
		if(v==3){$(parent+" .mesReport").html("Заказ: [Выполнен]");$(".meslog").attr("quest","0")}
		setTimeout(function(){$("[delete='1']").hide();},3000)
	}	
	var textArray = [""];
	function message(text, name, avatar, accept){			
		function scrollMes(mesNum){
				var height = $("#mes"+mesNum).height();
				var scroll = $(".meslog2").attr("scroll");
				$(".meslog2").attr("scroll", +scroll+height);
				$(".meslog").animate({scrollTop: +height+scroll},1);
		}; 
		function newMes(mesNum){
			$(".meslog2").attr("mesnum", +mesNum+1);
			setTimeout(scrollMes(mesNum),100);		
			if(text!=null && name!=null && name.slice(0,1)!="q" && avatar!=null && accept==null){		
			$(".meslog2").html($(".meslog2").html()+'<div id="mes'+mesNum+'" class="mes o0" timer="1"><div class="mes1U">'+name+':</div><div class="tx'+avatar+' avatar"></div><div class="message"><div class="mtext"></div></div><div class="mes1D">'+name+':</div></div>');
			}
			if(text!=null && name.slice(0,1)=="g" && avatar==null && accept==null){
			$(".meslog2").html($(".meslog2").html()+'<div id="mes'+mesNum+'" class="mes o0" style="background-color:#c6dca1" timer="1"><div class="mes1U">'+name.slice(1)+':</div><div class="message"><div class="mtext"></div></div><div class="mes1D">'+name.slice(1)+':</div></div>');
			setTimeout(function(){$("#mes"+mesNum).hide()},(5000+textArray[mesNum]*40));
			}
			if(text!=null && name.slice(0,1)=="r" && avatar==null && accept==null){	
			$(".meslog2").html($(".meslog2").html()+'<div id="mes'+mesNum+'" class="mes o0" style="background-color:#e0b3a8" timer="1"><div class="mes1U">'+name.slice(1)+':</div><div class="message"><div class="mtext"></div></div><div class="mes1D">'+name.slice(1)+':</div></div>');
			setTimeout(function(){$("#mes"+mesNum).hide()},(5000+textArray[mesNum]*40));
			}
			if(text!=null && name.slice(0,1)=="q" && avatar!=null && accept!=null){
			$(".meslog2").html($(".meslog2").html()+'<div id="mes'+mesNum+'" class="mes o0" style="background-color:#f8dc7a" timer="1" accept="0"><div class="mes1U">'+name.slice(1)+':</div><div class="tx'+avatar+' avatar"></div><div class="message"><div class="mtext" style="margin-bottom:24px"></div><div class="mesQuest">'+accept+'</div><div class="mesCancel" onclick="mesReport($(this),2);">Отказаться</div><div class="mesReport"></div></div><div class="mes1D">'+name.slice(1)+':</div></div>');
			$(".meslog").attr("questMes",mesNum);
			}
			if(text!=null && name!=null && name.slice(0,1)!="q" && avatar!=null && accept!=null){		
			$(".meslog2").html($(".meslog2").html()+'<div id="mes'+mesNum+'" class="mes o0" timer="1" accept="1"><div class="mes1U">'+name+':</div><div class="tx'+avatar+' avatar"></div><div class="message"><div class="mtext" style="margin-bottom:24px"></div><div class="mesAccept" onclick="mesReport($(this),1);'+accept+'">Действие</div><div class="mesCancel" onclick="mesReport($(this),0);">Отмена</div><div class="mesReport"></div></div><div class="mes1D">'+name+':</div></div>');
			}
			setTimeout(function(){$("#mes"+mesNum).removeClass("o0"); sound("click");},100);
			setTimeout(function(){
				setTimeout(function mewf(){
					if($("#mes"+mesNum).attr("accept")!="1"){$("#mes"+mesNum).addClass("o0");}
						else{setTimeout(mewf,50);}
				},50)
			},(2000+textArray[mesNum]*40));
			
			setTimeout(function mewf2(){
				if($("#mes"+mesNum).attr("accept")!="1"){$(".waitScroll").attr("wait","0");}
					else{setTimeout(mewf2,50);$(".waitScroll").attr("wait","1")}
			},50)
		
		};	
		function checkMes(mesNum){
			setTimeout(function textMes(){
				var timer = $("#mes"+mesNum).attr("timer");
				if(+timer != 0){
					if(+timer <= +textArray[mesNum]+20){
						$("#mes"+mesNum+" .mtext").html(text.slice(0,+timer));
						$("#mes"+mesNum).attr("timer",+timer+1);
						scrollMes(mesNum); 
						setTimeout(textMes,30)
					}else{$("#mes"+mesNum).attr("timer","end");}					
				}
			},30)
		};
		setTimeout(function waitMes(){
			if($("#mes"+(+$(".meslog2").attr("mesnum")-1)).attr("timer")=="end" && $("#mes"+(+$(".meslog2").attr("mesnum")-1)).attr("accept")!="1"){
				var mesNum = $(".meslog2").attr("mesnum");
				textArray.push(text.length);
				newMes(mesNum);checkMes(mesNum);			
			}
			else{setTimeout(waitMes,50);}
		},50)
	}
/*==================================================================================================================================================*/
	setInterval(function(){
		if($(".helper").html() == ""){$(".helper").attr("style","transform:translateY(48px)")}
			else{$(".helper").attr("style","transform:translateY(0px)")}
	},100)
	function closer(){$(".helper").html("");}
	function helper(h){
		var helper = $(h).attr("class").slice(2,4);
		var ds = $(h).attr("class").slice(7,8);
		if($(h).parent().attr("class").slice(-2) != "o0" && $(h).attr("class").slice(-2) != "99" && $(h).attr("class").slice(-8) != "tx99 ds0" && $(h).attr("class").slice(-8) != "tx98 ds33" && $(h).attr("class").slice(-2) != "98" && helper != "10"){
			$(".helper").html(addhelper(helper, ds));
		}
	}
	function addhelper(t, ds){
		if(t=="11"){return "Компас"};
		if(t=="12"){return "Погасшее светило"};
		if(t=="13"){return "Горящий факел"};
		if(t=="14" || t=="15" || t=="16"){return "Диалоговое окно"};
		if(t=="17"){return "Загадочный сундук"};
		if(t=="18"){return "С 8 марта!"};
		if(t=="19"){return "Новенькая сумка"};
		
		if(t[0].slice(0,1)=="2" && t[0].slice(0,2)!="20"){return "Боевой гриб"};
		
		if(ds=="0"){if(t[0].slice(0,1)=="3"){return "Неизвестная дверь"};}else{
			if(t=="30"){return "Салатовая дверь"};
			if(t=="31"){return "Оранжевая дверь"};
			if(t=="32"){return "Желтая дверь"};
			if(t=="33"){return "Бирюзовая дверь"};
			if(t=="34"){return "Фиолетовая дверь"};
			if(t=="35"){return "Красная дверь"};
			if(t=="36"){return "Зеленая дверь"};
			if(t=="37"){return "Голубая дверь"};	
			if(t=="38"){return "Розовая дверь"};
			if(t=="39"){return "Белая дверь"};
			if(t=="79"){return "Черная дверь"};
		}
		if(ds=="0"){if(t[0].slice(0,1)=="4"){return "Неизвестный ключ"};}else{
			if(t=="40"){return "Салатовый ключ"};
			if(t=="41"){return "Оранжевый ключ"};
			if(t=="42"){return "Желтый ключ"};
			if(t=="43"){return "Бирюзовый ключ"};
			if(t=="44"){return "Фиолетовый ключ"};
			if(t=="45"){return "Красный ключ"};
			if(t=="46"){return "Зеленый ключ"};
			if(t=="47"){return "Голубый ключ"};	
			if(t=="48"){return "Розовый ключ"};
			if(t=="49"){return "Белый ключ"};	
		}
		if(ds=="0"){if(t[0].slice(0,1)=="5"){return "Неизвестное зелье"};}else{
			if(t=="50"){return "Бутыль зрячести"};
			if(t=="51"){return "WD-40"};				
			if(t=="52"){return "Эликсир богатства"};
			if(t=="53"){return "Жидкость прозрения"};
			if(t=="54"){return "Зелье домашнего уюта"};
			if(t=="55"){return "Снотворное"};
			if(t=="56"){return "Странная бутылка"};
			if(t=="57"){return "Вода"};
			if(t=="58"){return "Отрезвитель"};
			if(t=="59"){return "Мусор"};
		}
		if(ds=="0"){if(t=="60" || t=="61" || t=="62" || t=="63" || t=="64"){return "Неизвестный меч"};}else{
			if(t=="60"){return "Деревянный меч"};
			if(t=="61"){return "Медный меч"};
			if(t=="62"){return "Железный меч"};
			if(t=="63"){return "Костяной меч"};
			if(t=="64"){return "Кристальный меч"};
		}
		if(ds=="0"){if(t=="65" || t=="66" || t=="67" || t=="68" || t=="69"){return "Неизвестный лук"};}else{
			if(t=="65"){return "Деревянный лук"};
			if(t=="66"){return "Медный лук"};
			if(t=="67"){return "Железный лук"};
			if(t=="68"){return "Костяной лук"};
			if(t=="69"){return "Кристальный лук"};
		}			
		if(t=="76" || t=="77"){return "Ингредиенты"};
		if(t[0].slice(0,1)=="8" && t!="80"){return "Заказ №"+t.slice(1)};
		if(t=="80"){return "Книга рецептов"};
		
		if(ds=="0"){if(t=="91" || t=="92" || t=="93" || t=="94" || t=="95"){return "Неизвестная жижа"};}else{
			if(t=="91"){return "Манящая светящаяся жижа"};
			if(t=="92"){return "Манящая светящаяся жижа"};		
			if(t=="93"){return "Манящая светящаяся жижа"};
			if(t=="94"){return "Манящая светящаяся жижа"};
			if(t=="95"){return "Манящая светящаяся жижа"};	
		}
		if(t=="97"){return "Молот"};		
	}
	
/*==================================================================================================================================================*/	
/*==================================================================================================================================================*/	
	function moveLeft(){		
		var id = "#"+$("gamer").parent().attr("id");	
		var idPos = $("gamer").parent().attr("id").slice(5).split("y");
		var maze = $("gamer").parent().attr("id").slice(0,4);
		var idX = idPos[0];
		var idY = idPos[1];
		var idF = $("gamer").parent().attr("id").slice(1,2)*2;
		var position = pos($(id).attr("class").slice(2,4));	
		if(position.slice(0,1) == 1){
			var idXnew = +idX-1; 
			var mX = 0; var mY = 0;	
			if(idXnew < 6-idF/2){ 		
				var idMaze = maze.slice(-1);
				if(idMaze != "1" && idMaze != "6"){
					if(idMaze != "2"){var newMaze = maze.slice(0,3)+(+idMaze - 1);}
						else{var newMaze = maze.slice(0,3)+"5";};
					mY += 90;	
					var idNew = "#"+newMaze+"x"+((5-idF/2)+idF)+"y"+idY;
				}else{
					if(idMaze == "1"){							
						var newMaze = maze.slice(0,3)+"3";
						var idNew = "#"+newMaze+"x"+idY+"y"+(6-idF/2);	
						mX += 90; mY += 90;
					}else{
						var newMaze = maze.slice(0,3)+"3";
						var idNew = "#"+newMaze+"x"+(11-idY)+"y"+((5-idF/2)+idF);	
						mX += -90; mY += 90;						
					}
				}											
			}else{var idNew = "#"+maze+"x"+idXnew+"y"+idY; }	
			move(idNew, id, mX, mY);	//g270();
		};
	}
/*==================================================================================================================================================*/
	function moveRight(){			
		var id = "#"+$("gamer").parent().attr("id");	
		var idPos = $("gamer").parent().attr("id").slice(5).split("y");
		var maze = $("gamer").parent().attr("id").slice(0,4);
		var idX = idPos[0];
		var idY = idPos[1];
		var idF = $("gamer").parent().attr("id").slice(1,2)*2;
		var position = pos($(id).attr("class").slice(2,4));				
		if(position.slice(2,3) == 1){
			var idXnew = +idX+1; 
			var mX = 0; var mY = 0;	
			if(idXnew > (5-idF/2)+idF){ 		
				let idMaze = maze.slice(-1);
				if(idMaze != "1" && idMaze != "6"){
					if(idMaze != "5"){var newMaze = maze.slice(0,3)+(+idMaze + 1);}
						else{var newMaze = maze.slice(0,3)+"2";};
					var idNew = "#"+newMaze+"x"+(6-idF/2)+"y"+idY;	
					mY += -90;	
				}else{
					if(idMaze == "1"){							
						var newMaze = maze.slice(0,3)+"5";
						var idNew = "#"+newMaze+"x"+(11-idY)+"y"+(6-idF/2);	
						mX += 90; mY += -90;	
					}else{
						var newMaze = maze.slice(0,3)+"5";
						var idNew = "#"+newMaze+"x"+idY+"y"+((5-idF/2)+idF);	
						mX += -90; mY += -90;	
					}					
				}									
			}else{var idNew = "#"+maze+"x"+idXnew+"y"+idY;}			
			move(idNew, id, mX, mY); //g90();
		}		
	}
/*==================================================================================================================================================*/	
	function moveUp(){
		var id = "#"+$("gamer").parent().attr("id");	
		var idPos = $("gamer").parent().attr("id").slice(5).split("y");
		var maze = $("gamer").parent().attr("id").slice(0,4);
		var idX = idPos[0];
		var idY = idPos[1];
		var idF = $("gamer").parent().attr("id").slice(1,2)*2;
		var position = pos($(id).attr("class").slice(2,4));					
		if(position.slice(1,2) == 1){
			var idYnew = +idY-1;
			var mX = 0; var mY = 0;
			if(idYnew < 6-idF/2){ 
				let idMaze = maze.slice(-1);
					if(idMaze == "2" || idMaze == "3" || idMaze == "4" || idMaze == "5"){var newMaze = maze.slice(0,3)+"1";} 
					if(idMaze == "1"){
						var newMaze = maze.slice(0,3)+"2";
						var idNew = "#"+newMaze+"x"+(11-idX)+"y"+(6-idF/2);
						mX += 180; mY += 180;	
					} 
					if(idMaze == "2"){var idNew = "#"+newMaze+"x"+(11-idX)+"y"+(6-idF/2); 		mY += 180;} 
					if(idMaze == "3"){var idNew = "#"+newMaze+"x"+(6-idF/2)+"y"+idX; 			mY += -90;} 
					if(idMaze == "4"){var idNew = "#"+newMaze+"x"+idX+"y"+((5-idF/2)+idF);} 		
					if(idMaze == "5"){var idNew = "#"+newMaze+"x"+((5-idF/2)+idF)+"y"+(11-idX); mY += 90;} 
					if(idMaze == "6"){
						var newMaze = maze.slice(0,3)+"4";
						var idNew = "#"+newMaze+"x"+idX+"y"+((5-idF/2)+idF);	
					} 				
				mX += -90;
			}else{var idNew = "#"+maze+"x"+idX+"y"+idYnew;}	
			move(idNew, id, mX, mY);
		}		
	}
/*==================================================================================================================================================*/
	function moveDown(){
		var id = "#"+$("gamer").parent().attr("id");	
		var idPos = $("gamer").parent().attr("id").slice(5).split("y");
		var maze = $("gamer").parent().attr("id").slice(0,4);
		var idX = idPos[0];
		var idY = idPos[1];
		var idF = $("gamer").parent().attr("id").slice(1,2)*2;
		var position = pos($(id).attr("class").slice(2,4));				
		if(position.slice(3) == 1){	
			var idYnew = +idY+1;
			var mX = 0; var mY = 0;
			if(idYnew > (5-idF/2)+idF){ 		
				let idMaze = maze.slice(-1);
					if(idMaze == "2" || idMaze == "3" || idMaze == "4" || idMaze == "5"){var newMaze = maze.slice(0,3)+"6";} 
					if(idMaze == "1"){
						var newMaze = maze.slice(0,3)+"4";
						var idNew = "#"+newMaze+"x"+idX+"y"+(6-idF/2);
					} 
					if(idMaze == "2"){var idNew = "#"+newMaze+"x"+(11-idX)+"y"+((5-idF/2)+idF); mY += 180;} 
					if(idMaze == "3"){var idNew = "#"+newMaze+"x"+(6-idF/2)+"y"+(11-idX);		mY += -90;} 
					if(idMaze == "4"){var idNew = "#"+newMaze+"x"+idX+"y"+(6-idF/2);} 		
					if(idMaze == "5"){var idNew = "#"+newMaze+"x"+((5-idF/2)+idF)+"y"+idX; 		mY += 90;} 
					if(idMaze == "6"){
						var newMaze = maze.slice(0,3)+"2";
						var idNew = "#"+newMaze+"x"+(11-idX)+"y"+((5-idF/2)+idF);	
						mX += 180; mY += 180;
					} 
				mX += 90;						
			}else{var idNew = "#"+maze+"x"+idX+"y"+idYnew;}	
			move(idNew, id, mX, mY); //g180();
		}
	}
/*==================================================================================================================================================*/	
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/
/*==================================================================================================================================================*/	
$(document).bind("keydown", function(e){
	var id = "#"+$("gamer").parent().attr("id");	
	var idSlice = $(id).parent().parent().attr("class").slice(0,4);
	if(e.keyCode==49){dblclick("#slot1");}
	if(e.keyCode==50){dblclick("#slot2");}
	if(e.keyCode==51){dblclick("#slot3");}
	if(e.keyCode==69){take(id);}
	if(e.keyCode==81){v1(id);}
	
	if($("#backpack").attr("compass")=="1"){ if(mS(1)=="11" || mS(2)=="11" || mS(3)=="11"){
		if($(".shopBG").attr("style").slice(9,10)!="1" && $("#backpack").css("left")=="-134px" && $("#avatar div").attr("class").slice(2,4)>70 && $(".loading").css("z-index")!="100"){
			var rX = [""]; var rY = [""];
			for(var r = 1; r < 6; r++){rX.push($(".cube"+r).attr("rX"));rY.push($(".cube"+r).attr("rY"))}		
			if(e.keyCode==65){rotateCube(0,45);		for(r=1;r<6;r++){$(".cube"+r).attr("rY",+rY[r]+45)}}
			if(e.keyCode==87){rotateCube(-45,0);	for(r=1;r<6;r++){$(".cube"+r).attr("rX",+rX[r]-45)}}
			if(e.keyCode==68){rotateCube(0,-45);	for(r=1;r<6;r++){$(".cube"+r).attr("rY",+rY[r]-45)}}
			if(e.keyCode==83){rotateCube(45,0);		for(r=1;r<6;r++){$(".cube"+r).attr("rX",+rX[r]+45)}}
		}
	}}else{
		switch(e.keyCode){	
			case 67: v1(idSlice,id);break;
			
			case 65: moveLeft();	break;	
			case 87: moveUp();		break;				
			case 68: moveRight();	break;
			case 83: moveDown();	break;		
		}	
	}
})	
</script>